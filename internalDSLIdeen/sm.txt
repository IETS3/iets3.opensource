
record T {
  
}

meta structure state machine { 
  query content currentState() = (runtime):string = {runtime.current.name} 
  command content* event(name: string) = (runtime):runtime = {...contentsOf<state>.} 
  content* state(name: string, initial: boolean, tx:list<[event, state]>) 
  command init() {
    #(...contentsOf<state>... where initial)
  }
} runtime(curr: state) 


state machine FlipFlop { 
  event PED_BUTTON(whoPressed: string)
  event AUS()
  state ON, list([PED_BUTTON, OFF], [AUS, AUS])
  state OFF, list([PED_BUTTON, ON])
  state AUS
} 


val sm = new FlipFlop.init()

sm.PED_BUTTON("makrus")
val s: string = sm.currentState
