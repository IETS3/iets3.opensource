package org.iets3.core.expr.tracing.editor;

/*Generated by MPS */

import java.awt.Color;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.iets3.core.expr.tracing.util.TracingValue;
import com.intellij.ui.JBColor;

public class BoxColors {

  private static final Color[] darkColors = {d("211E33"), d("6852B0"), d("817AB7"), d("B8B3BC"), d("E1D7CD"), d("36444C"), d("57666B"), d("738472"), d("8C8780"), d("A0878A"), d("67736D"), d("471338"), d("2A0A24"), d("1E0F1A"), d("0B0708")};
  private static final Color[] brightColors = {d("EBEAEC"), d("F2F0F9"), d("F4F4FA"), d("FAF9FA"), d("FEFDFC"), d("DFE3E6"), d("E9EDEF"), d("F1F6F1"), d("F8F7F5"), d("FEF7F7"), d("D5D8D7"), d("CCBEC8"), d("C4BCC3"), d("C1BDC0"), d("BCBBBB")};

  private static Color d(String s) {
    return Color.decode("#" + s);
  }

  public static int depth(SNode n) {
    int max = 0;
    for (SNode c : ListSequence.fromList(SNodeOperations.getChildren(n))) {
      int cd = depth(c);
      if (cd > max) {
        max = cd;
      }
    }
    return max + 1;
  }

  public static Color getDarkColor(SNode n) {
    TracingValue tv = TracingValue.get(n);
    if (tv == null) {
      return Color.red;
    }
    String val = tv.renderedValue;
    if (val != null && val.startsWith("FAIL:")) {
      return Color.red;
    }
    int s = depth(n);
    if (s >= darkColors.length) {
      s = darkColors.length - 1;
    }
    return new JBColor(darkColors[s], brightColors[s]);
  }

  public static Color getBrightColor(SNode n) {
    TracingValue tv = TracingValue.get(n);
    if (tv == null) {
      return null;
    }
    int s = depth(n);
    if (s >= brightColors.length) {
      s = brightColors.length - 1;
    }
    return new JBColor(brightColors[s], darkColors[s]);
  }

}
