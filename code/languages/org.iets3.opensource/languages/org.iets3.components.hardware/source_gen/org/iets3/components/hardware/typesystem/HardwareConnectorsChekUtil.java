package org.iets3.components.hardware.typesystem;

/*Generated by MPS */

import java.util.Map;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class HardwareConnectorsChekUtil {

  private Map<SNode, List<SNode>> connectedPorts;
  private List<SNode> outerPorts;

  public HardwareConnectorsChekUtil() {
  }

  public boolean isPortAlreadyConnected(SNode sourceInstance, SNode sourcePort) {
    if (connectedPorts == null) {
      connectedPorts = MapSequence.fromMap(new HashMap<SNode, List<SNode>>());
    }

    if (MapSequence.fromMap(connectedPorts).containsKey(sourceInstance)) {
      if (ListSequence.fromList(MapSequence.fromMap(connectedPorts).get(sourceInstance)).contains(sourcePort)) {
        return true;
      } else {
        ListSequence.fromList(MapSequence.fromMap(connectedPorts).get(sourceInstance)).addElement(sourcePort);
      }
    } else {
      MapSequence.fromMap(connectedPorts).put(sourceInstance, new ArrayList<SNode>());
      ListSequence.fromList(MapSequence.fromMap(connectedPorts).get(sourceInstance)).addElement(sourcePort);
    }
    return false;
  }


  public boolean isOuterPortAlreadyConnected(SNode outerPort) {
    if (outerPorts == null) {
      outerPorts = new ArrayList<SNode>();
    }

    if (ListSequence.fromList(outerPorts).contains(outerPort)) {
      return true;
    } else {
      ListSequence.fromList(outerPorts).addElement(outerPort);
    }

    return false;
  }


}
