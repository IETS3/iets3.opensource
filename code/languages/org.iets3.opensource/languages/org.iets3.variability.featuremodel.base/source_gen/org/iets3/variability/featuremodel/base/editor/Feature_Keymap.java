package org.iets3.variability.featuremodel.base.editor;

/*Generated by MPS */

import jetbrains.mps.editor.runtime.cells.KeyMapImpl;
import jetbrains.mps.openapi.editor.cells.KeyMapAction;
import jetbrains.mps.editor.runtime.cells.KeyMapActionImpl;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.List;
import org.iets3.variability.featuremodel.base.behavior.ICanHaveSubFeature__BehaviorDescriptor;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import jetbrains.mps.internal.collections.runtime.Sequence;
import org.iets3.variability.featuremodel.base.behavior.AbstractFeature__BehaviorDescriptor;
import org.iets3.variability.featuremodel.base.behavior.FeatureTreeNode__BehaviorDescriptor;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.editor.runtime.selection.SelectionUtil;
import jetbrains.mps.openapi.editor.selection.SelectionManager;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;

public class Feature_Keymap extends KeyMapImpl {
  public Feature_Keymap() {
    this.setApplicableToEveryModel(false);
    KeyMapAction action;
    action = new Feature_Keymap_Action0();
    this.putAction("ctrl+alt", "VK_ENTER", action);
    action = new Feature_Keymap_Action1();
    this.putAction("ctrl+shift", "VK_ENTER", action);
    action = new Feature_Keymap_Action2();
    this.putAction("ctrl", "VK_ENTER", action);
    action = new Feature_Keymap_Action3();
    this.putAction("alt", "VK_DOWN", action);
    action = new Feature_Keymap_Action4();
    this.putAction("alt", "VK_UP", action);
  }
  public static class Feature_Keymap_Action0 extends KeyMapActionImpl {
    public Feature_Keymap_Action0() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Add new child ";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.AbstractFeature$T))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return SNodeOperations.isInstanceOf(node, CONCEPTS.ICanHaveSubFeature$Cu);
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      ICanHaveSubFeature__BehaviorDescriptor.addSubFeature_id1GMgmu$sb6j.invoke(SNodeOperations.cast(node, CONCEPTS.ICanHaveSubFeature$Cu), createFeature_1upo2r_a0a0a0a());
    }
    public String getKeyStroke() {
      return "ctrl alt ENTER";
    }
    private static SNode createFeature_1upo2r_a0a0a0a() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.Feature$D7);
      return n0.getResult();
    }
  }
  public static class Feature_Keymap_Action1 extends KeyMapActionImpl {
    public Feature_Keymap_Action1() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Add new sibling feature";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.AbstractFeature$T))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return SNodeOperations.isInstanceOf(SNodeOperations.getParent(node), CONCEPTS.ICanHaveSubFeature$Cu);
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      ICanHaveSubFeature__BehaviorDescriptor.addSubFeature_id1GMgmu$sb6j.invoke(SNodeOperations.cast(SNodeOperations.getParent(node), CONCEPTS.ICanHaveSubFeature$Cu), createFeature_1upo2r_a0a0a0b());
    }
    public String getKeyStroke() {
      return "ctrl shift ENTER";
    }
    private static SNode createFeature_1upo2r_a0a0a0b() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.Feature$D7);
      return n0.getResult();
    }
  }
  public static class Feature_Keymap_Action2 extends KeyMapActionImpl {
    public Feature_Keymap_Action2() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Add new child ";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.AbstractFeature$T))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return SNodeOperations.isInstanceOf(node, CONCEPTS.ICanHaveSubFeature$Cu);
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      ICanHaveSubFeature__BehaviorDescriptor.addSubFeature_id1GMgmu$sb6j.invoke(SNodeOperations.cast(node, CONCEPTS.ICanHaveSubFeature$Cu), createFeatureTreeNode_1upo2r_a0a0a0c());
    }
    public String getKeyStroke() {
      return "ctrl ENTER";
    }
    private static SNode createFeatureTreeNode_1upo2r_a0a0a0c() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.FeatureTreeNode$HV);
      return n0.getResult();
    }
  }
  public static class Feature_Keymap_Action3 extends KeyMapActionImpl {
    public Feature_Keymap_Action3() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Go down";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.AbstractFeature$T))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return Sequence.fromIterable(AbstractFeature__BehaviorDescriptor.subFeatures_id6GZHy357BW_.invoke(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(node))).isNotEmpty();
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      Iterable<SNode> subFeatures = AbstractFeature__BehaviorDescriptor.subFeatures_id6GZHy357BW_.invoke(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(node));
      int i = Sequence.fromIterable(subFeatures).count() / 2;
      SNode child = ListSequence.fromList(Sequence.fromIterable(subFeatures).toList()).getElement(i);
      SelectionUtil.selectLabelCellWithSelection(editorContext, child, SelectionManager.FIRST_EDITABLE_CELL, 0, 0);
      editorContext.getEditorComponent().scrollToNode(child);
    }
    public String getKeyStroke() {
      return "alt DOWN";
    }
  }
  public static class Feature_Keymap_Action4 extends KeyMapActionImpl {
    public Feature_Keymap_Action4() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Go up";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.AbstractFeature$T))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return (SNodeOperations.getParent(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(node)) != null);
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      SNode ancestor = SNodeOperations.getParent(node);
      SelectionUtil.selectLabelCellWithSelection(editorContext, ancestor, SelectionManager.FIRST_EDITABLE_CELL, 0, 0);
      editorContext.getEditorComponent().scrollToNode(ancestor);

    }
    public String getKeyStroke() {
      return "alt UP";
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractFeature$T = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x6b3fb620c4f9ac90L, "org.iets3.variability.featuremodel.base.structure.AbstractFeature");
    /*package*/ static final SInterfaceConcept ICanHaveSubFeature$Cu = MetaAdapterFactory.getInterfaceConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x1b324167a470b175L, "org.iets3.variability.featuremodel.base.structure.ICanHaveSubFeature");
    /*package*/ static final SConcept Feature$D7 = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a307L, "org.iets3.variability.featuremodel.base.structure.Feature");
    /*package*/ static final SConcept FeatureTreeNode$HV = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172167L, "org.iets3.variability.featuremodel.base.structure.FeatureTreeNode");
  }
}
