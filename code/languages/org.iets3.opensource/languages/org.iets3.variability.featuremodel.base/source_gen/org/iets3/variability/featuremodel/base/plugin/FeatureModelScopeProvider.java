package org.iets3.variability.featuremodel.base.plugin;

/*Generated by MPS */

import jetbrains.mps.scope.Scope;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.scope.ModelPlusImportedScope;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.scope.FilteringScope;
import org.iets3.variability.featuremodel.base.behavior.FeatureTreeNode__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class FeatureModelScopeProvider {
  /**
   * Get a scope with the root features of all feature models, in the current model and its dependencies.
   * 
   * @param context a node which defines the current model
   * @return the scope of root features
   */
  public static Scope featureModelRootsScope(SNode context) {
    Scope allVisible = new ModelPlusImportedScope(SNodeOperations.getModel(context), false, CONCEPTS.FeatureTreeNode$HV);
    return new FilteringScope(allVisible) {
      @Override
      public boolean isExcluded(SNode node) {
        return !((boolean) FeatureTreeNode__BehaviorDescriptor.isRoot_id7Nu9WvXvoDo.invoke(SNodeOperations.cast(node, CONCEPTS.FeatureTreeNode$HV)));
      }
    };
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept FeatureTreeNode$HV = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172167L, "org.iets3.variability.featuremodel.base.structure.FeatureTreeNode");
  }
}
