package org.iets3.variability.featuremodel.base.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import jetbrains.mps.logging.Logger;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import java.util.Set;
import org.jetbrains.mps.openapi.language.SEnumerationLiteral;
import jetbrains.mps.openapi.editor.EditorContext;
import java.util.List;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.iets3.analysis.base.plugin.STF;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.Collections;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SEnumOperations;
import org.iets3.analysis.solversupport.util.plugin.ISolvableSettingsModel;
import org.iets3.core.base.behavior.ICanRunCheckManually__BehaviorDescriptor;
import java.util.Optional;
import org.jetbrains.mps.openapi.module.SRepository;
import org.iets3.analysis.solversupport.util.plugin.ProjectUtil;
import org.iets3.variability.base.behavior.MpsActions;
import org.iets3.analysis.base.plugin.AsyncSolverTaskExecutor;
import java.time.Duration;
import com.intellij.openapi.application.ApplicationManager;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import org.iets3.variability.base.behavior.TreeWalker;
import com.mbeddr.mpsutil.common.graph.Graph;
import com.mbeddr.core.base.behavior.IDetectCycle__BehaviorDescriptor;
import com.mbeddr.mpsutil.common.graph.GraphUtil;
import java.util.ArrayList;
import org.iets3.variability.base.behavior.IVariabilityContent__BehaviorDescriptor;
import jetbrains.mps.internal.collections.runtime.NotNullWhereFilter;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SProperty;

public final class FeatureModel__BehaviorDescriptor extends BaseBHDescriptor {
  private static final Logger LOG = Logger.getLogger(FeatureModel__BehaviorDescriptor.class);
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, "org.iets3.variability.featuremodel.base.structure.FeatureModel");

  public static final SMethod<Iterable<SNode>> getUniquelyNamedElements_id4qSf1u1TRfj = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("getUniquelyNamedElements").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5095889050031059923L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2();
  public static final SMethod<SNode> createSolverTask_id4pkidg67Lgb = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("createSolverTask").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5067755556171617291L).languageId(0x8fed954c202d18beL, 0xdb8bd0353f5141d8L).build2();
  public static final SMethod<String> getSolvableName_idWieAE6TWOo = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getSolvableName").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1085994689353993496L).languageId(0x8fed954c202d18beL, 0xdb8bd0353f5141d8L).build2();
  public static final SMethod<Iterable<SNode>> getDependenciesRelevantForCycleDetection_id59HbAIOYveX = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("getDependenciesRelevantForCycleDetection").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5939454523704210365L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2();
  public static final SMethod<Set<SNode>> traceBackElementInCycle_id17fjvcLF7UR = new SMethodBuilder<Set<SNode>>(new SJavaCompoundTypeImpl((Class<Set<SNode>>) ((Class) Object.class))).name("traceBackElementInCycle").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1283330125729660599L).languageId(0xaa41d1b2bffa7eb1L, 0xd4280a54f6df4383L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Iterable<SNode>> getIncludedFeatureModels_id4$KkN8iCYUq = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("getIncludedFeatureModels").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5273806638177054362L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<SNode> getContextFeature_id30ECcbtSVMe = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("getContextFeature").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(3470763221649177742L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> usingParams_idMYWxk17YoO = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("usingParams").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(918437546057262644L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> enumDeclarations_id4eA6KATu5ZO = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("enumDeclarations").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4874613375255470068L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> defaultRelationChildren_id4eA6KATXKnM = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("defaultRelationChildren").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4874613375263770098L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> orRelationChildren_id4eA6KAU38cU = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("orRelationChildren").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4874613375265178426L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> xorRelationChildren_id4eA6KAU36NL = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("xorRelationChildren").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4874613375265172721L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  /*package*/ static final SMethod<Iterable<SNode>> relationChildren_id4eA6KAU3cXl = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("relationChildren").modifiers(0, AccessPrivileges.PRIVATE).concept(CONCEPT).baseMethodId(4874613375265197909L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2(SMethodBuilder.createJavaParameter((Class<SEnumerationLiteral>) ((Class) Object.class), ""));
  public static final SMethod<Void> runManually_id3R3AIvumrTm = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("runManually").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4450571177430728278L).languageId(0xbd9c05c0f8725a35L, 0x7b68d745a7b848b9L).build2(SMethodBuilder.createJavaParameter(EditorContext.class, ""));
  public static final SMethod<Boolean> showSubResults_id4MH81Y0VldB = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("showSubResults").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(5525107637532578663L).languageId(0xbd9c05c0f8725a35L, 0x7b68d745a7b848b9L).build2();
  public static final SMethod<Void> addConstraint_id1GMgmu$nBJk = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("addConstraint").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1959700701254679508L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Iterable<SNode>> constraints_id1wX6IAeW7Y1 = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("constraints").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1746581820917448577L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> featureAttributesInConstraints_idZsB2gDAfu$ = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("featureAttributesInConstraints").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1142960084575909796L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Void> remove_id4hLJNwY_IA1 = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("remove").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4931933315236555137L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Boolean> containsCycle_id3eg222GEqlF = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("containsCycle").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(3715478629009433963L).languageId(0x895e1424f54166ecL, 0x165f1d0525064544L).build2();
  public static final SMethod<Iterable<SNode>> directDependencies_id6Gx9iNnB7_2 = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("directDependencies").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(7719492110815885634L).languageId(0xa96f9f4e212c69cbL, 0x9b66c5c938bf4315L).build2();

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(getUniquelyNamedElements_id4qSf1u1TRfj, createSolverTask_id4pkidg67Lgb, getSolvableName_idWieAE6TWOo, getDependenciesRelevantForCycleDetection_id59HbAIOYveX, traceBackElementInCycle_id17fjvcLF7UR, getIncludedFeatureModels_id4$KkN8iCYUq, getContextFeature_id30ECcbtSVMe, usingParams_idMYWxk17YoO, enumDeclarations_id4eA6KATu5ZO, defaultRelationChildren_id4eA6KATXKnM, orRelationChildren_id4eA6KAU38cU, xorRelationChildren_id4eA6KAU36NL, relationChildren_id4eA6KAU3cXl, runManually_id3R3AIvumrTm, showSubResults_id4MH81Y0VldB, addConstraint_id1GMgmu$nBJk, constraints_id1wX6IAeW7Y1, featureAttributesInConstraints_idZsB2gDAfu$, remove_id4hLJNwY_IA1, containsCycle_id3eg222GEqlF, directDependencies_id6Gx9iNnB7_2);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static Iterable<SNode> getUniquelyNamedElements_id4qSf1u1TRfj(@NotNull SNode __thisNode__) {
    return SNodeOperations.getNodeDescendants(__thisNode__, CONCEPTS.FeatureTreeNode$HV, false, new SAbstractConcept[]{});
  }
  /*package*/ static SNode createSolverTask_id4pkidg67Lgb(@NotNull SNode __thisNode__) {
    return STF.createSolverTask(__thisNode__, "inhabitance");
  }
  /*package*/ static String getSolvableName_idWieAE6TWOo(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(__thisNode__, LINKS.root$XEj1), PROPS.name$MnvL);
  }
  /*package*/ static Iterable<SNode> getDependenciesRelevantForCycleDetection_id59HbAIOYveX(@NotNull SNode __thisNode__) {
    return ((Iterable<SNode>) FeatureModel__BehaviorDescriptor.getIncludedFeatureModels_id4$KkN8iCYUq.invoke(__thisNode__));
  }
  /*package*/ static Set<SNode> traceBackElementInCycle_id17fjvcLF7UR(@NotNull SNode __thisNode__, SNode dependency) {
    Set<SNode> result = SetSequence.fromSet(new HashSet<SNode>());
    for (SNode d : ListSequence.fromList(SNodeOperations.getNodeDescendants(SLinkOperations.getTarget(__thisNode__, LINKS.root$XEj1), CONCEPTS.FeatureModelInclude$Iq, false, new SAbstractConcept[]{}))) {
      if (dependency == SLinkOperations.getTarget(d, LINKS.fm$EY24)) {
        SetSequence.fromSet(result).addElement(d);
      }
    }
    return result;
  }
  /*package*/ static Iterable<SNode> getIncludedFeatureModels_id4$KkN8iCYUq(@NotNull SNode __thisNode__) {
    return ListSequence.fromList(SNodeOperations.getNodeDescendants(SLinkOperations.getTarget(__thisNode__, LINKS.root$XEj1), CONCEPTS.FeatureModelInclude$Iq, false, new SAbstractConcept[]{})).select((it) -> SLinkOperations.getTarget(it, LINKS.fm$EY24));
  }
  /*package*/ static SNode getContextFeature_id30ECcbtSVMe(@NotNull SNode __thisNode__) {
    return (SNode) IFeatureContext__BehaviorDescriptor.getContextFeature_id30ECcbtSVMe.invoke(SLinkOperations.getTarget(__thisNode__, LINKS.root$XEj1));
  }
  /*package*/ static Iterable<SNode> usingParams_idMYWxk17YoO(@NotNull SNode __thisNode__) {
    if ((SLinkOperations.getTarget(__thisNode__, LINKS.using$qwrH) == null)) {
      return Sequence.fromIterable(Collections.emptyList());
    } else {
      return SLinkOperations.getChildren(SLinkOperations.getTarget(__thisNode__, LINKS.using$qwrH), LINKS.params$eBc7);
    }
  }
  /*package*/ static Iterable<SNode> enumDeclarations_id4eA6KATu5ZO(@NotNull SNode __thisNode__) {
    return Sequence.fromIterable(SNodeOperations.ofConcept(ListSequence.fromList((SNodeOperations.getNodeDescendants(__thisNode__, CONCEPTS.Feature$D7, false, new SAbstractConcept[]{}))).translate((it) -> (Iterable<SNode>) AbstractFeature__BehaviorDescriptor.attributes_id6GZHy357BWb.invoke(it)).select((it) -> (AbstractFeatureAttribute__BehaviorDescriptor.effectiveType_id3rysoRwbqUB.invoke(it))), CONCEPTS.EnumType$z)).select((it) -> SLinkOperations.getTarget(it, LINKS.enum$2YBB)).distinct();
  }
  /*package*/ static Iterable<SNode> defaultRelationChildren_id4eA6KATXKnM(@NotNull SNode __thisNode__) {
    return Sequence.fromIterable(FeatureModel__BehaviorDescriptor.relationChildren_id4eA6KAU3cXl.invokeSpecial(__thisNode__, SEnumOperations.getMember(MetaAdapterFactory.getEnumeration(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475182d3aL, "org.iets3.variability.featuremodel.base.structure.SubFeatureRelationship"), 0x375cadc475182d3bL, "default"))).translate((it) -> (Iterable<SNode>) AbstractFeature__BehaviorDescriptor.subFeatures_id6GZHy357BW_.invoke(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(it)));
  }
  /*package*/ static Iterable<SNode> orRelationChildren_id4eA6KAU38cU(@NotNull SNode __thisNode__) {
    return ((Iterable<SNode>) FeatureModel__BehaviorDescriptor.relationChildren_id4eA6KAU3cXl.invokeSpecial(__thisNode__, SEnumOperations.getMember(MetaAdapterFactory.getEnumeration(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475182d3aL, "org.iets3.variability.featuremodel.base.structure.SubFeatureRelationship"), 0x375cadc475182d48L, "or")));
  }
  /*package*/ static Iterable<SNode> xorRelationChildren_id4eA6KAU36NL(@NotNull SNode __thisNode__) {
    return ((Iterable<SNode>) FeatureModel__BehaviorDescriptor.relationChildren_id4eA6KAU3cXl.invokeSpecial(__thisNode__, SEnumOperations.getMember(MetaAdapterFactory.getEnumeration(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475182d3aL, "org.iets3.variability.featuremodel.base.structure.SubFeatureRelationship"), 0x375cadc475182d45L, "xor")));
  }
  /*package*/ static Iterable<SNode> relationChildren_id4eA6KAU3cXl(@NotNull SNode __thisNode__, final SEnumerationLiteral relationship) {
    return ListSequence.fromList(SNodeOperations.getNodeDescendants(__thisNode__, CONCEPTS.FeatureTreeNode$HV, false, new SAbstractConcept[]{})).where((it) -> AbstractFeature__BehaviorDescriptor.subFeatureRelationShip_id6GZHy357BWt.invoke(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(it)) == relationship && Sequence.fromIterable(AbstractFeature__BehaviorDescriptor.subFeatures_id6GZHy357BW_.invoke(FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(it))).count() > 0);
  }
  /*package*/ static void runManually_id3R3AIvumrTm(@NotNull final SNode __thisNode__, EditorContext edCtxOrNull) {
    SPropertyOperations.assign(__thisNode__, PROPS.solverTaskRunning$ceHc, true);
    int timeout = ISolvableSettingsModel.INSTANCE.getTimeout();
    if (((boolean) ICanRunCheckManually__BehaviorDescriptor.shouldBeChecked_id1996aX856sE.invoke(__thisNode__))) {
      Optional<? extends SRepository> projectRepository = ProjectUtil.projectRepository(__thisNode__);
      if (projectRepository.isEmpty()) {
        if (LOG.isErrorLevel()) {
          LOG.error("Async solver execution aborted, no project repository found");
        }
        return;
      }

      final MpsActions.Impl mpsActions = new MpsActions.Impl(projectRepository.get());
      AsyncSolverTaskExecutor.submitISolvable(__thisNode__, Duration.ofSeconds(timeout), true).thenRun(() -> ApplicationManager.getApplication().invokeLaterOnWriteThread(() -> mpsActions.commandAction(() -> SPropertyOperations.set(__thisNode__, PROPS.solverTaskRunning$ceHc, false))));
    }
  }
  /*package*/ static boolean showSubResults_id4MH81Y0VldB(@NotNull SNode __thisNode__) {
    return true;
  }
  /*package*/ static void addConstraint_id1GMgmu$nBJk(@NotNull SNode __thisNode__, SNode constraint) {
    ListSequence.fromList(SLinkOperations.getChildren(__thisNode__, LINKS.constraints$SJXp)).addElement(constraint);
  }
  /*package*/ static Iterable<SNode> constraints_id1wX6IAeW7Y1(@NotNull SNode __thisNode__) {
    return SLinkOperations.getChildren(__thisNode__, LINKS.constraints$SJXp);
  }
  /*package*/ static Iterable<SNode> featureAttributesInConstraints_idZsB2gDAfu$(@NotNull SNode __thisNode__) {
    return Sequence.fromIterable((Sequence.fromIterable(ICanHaveConstraint__BehaviorDescriptor.constraints_id1wX6IAeW7Y1.invoke(__thisNode__)).union(ListSequence.fromList(SNodeOperations.getNodeDescendants(SLinkOperations.getTarget(__thisNode__, LINKS.root$XEj1), CONCEPTS.AbstractConstraint$MS, false, new SAbstractConcept[]{}))))).translate((it) -> {
      return ListSequence.fromList(SNodeOperations.getNodeDescendants(it, CONCEPTS.AttributeRefExpr$VD, false, new SAbstractConcept[]{})).select(new _FunctionTypes._return_P1_E0<SNode, SNode>() {
        public SNode invoke(SNode it) {
          return SLinkOperations.getTarget(it, LINKS.attribute$Kd68);
        }
      }).union(ListSequence.fromList(SNodeOperations.getNodeDescendants(it, CONCEPTS.FeatureAttributeDotTarget$Ko, false, new SAbstractConcept[]{})).select(new _FunctionTypes._return_P1_E0<SNode, SNode>() {
        public SNode invoke(SNode it) {
          return SLinkOperations.getTarget(it, LINKS.attribute$Av14);
        }
      }));
    }).distinct();
  }
  /*package*/ static void remove_id4hLJNwY_IA1(@NotNull SNode __thisNode__, SNode constraint) {
    ListSequence.fromList(SLinkOperations.getChildren(__thisNode__, LINKS.constraints$SJXp)).removeElement(constraint);
  }
  /*package*/ static boolean containsCycle_id3eg222GEqlF(@NotNull SNode __thisNode__) {

    Iterable<SNode> models = TreeWalker.gatherChildren(__thisNode__, CONCEPTS.FeatureModel$X0, CONCEPTS.FeatureModelInclude$Iq, (SNode n) -> SLinkOperations.getTarget(((SNode) n), LINKS.fm$EY24));

    Graph<SNode> dependencyGraph = IDetectCycle__BehaviorDescriptor.getDependencyGraph_id17fjvcLC_kB.invoke(__thisNode__);

    for (SNode elem : Sequence.fromIterable(models)) {
      if (SNodeOperations.isInstanceOf(elem, CONCEPTS.FeatureModel$X0)) {
        SNode feature = (SNode) elem;
        // TODO: The below is copied from IDetectCycle_Behavior for efficiency
        Set<SNode> sccFeature = GraphUtil.computeSCCSingle(feature, dependencyGraph);
        if (SetSequence.fromSet(sccFeature).count() > 1 || (SetSequence.fromSet(sccFeature).count() == 1 && dependencyGraph.getTargets(feature) != null && SetSequence.fromSet(dependencyGraph.getTargets(feature)).contains(feature))) {
          return true;
        }
      }
    }
    // No cycle found
    return false;
  }
  /*package*/ static Iterable<SNode> directDependencies_id6Gx9iNnB7_2(@NotNull SNode __thisNode__) {
    List<SNode> dependencies = new ArrayList<SNode>();
    ListSequence.fromList(dependencies).addSequence(Sequence.fromIterable(FeatureModel__BehaviorDescriptor.getIncludedFeatureModels_id4$KkN8iCYUq.invoke(__thisNode__)).select((it) -> (SNode) IVariabilityContent__BehaviorDescriptor.container_id3D4yX3IUbRd.invoke(it)));
    return ListSequence.fromList(dependencies).where(new NotNullWhereFilter()).distinct();
  }

  /*package*/ FeatureModel__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 0:
        return (T) ((Iterable<SNode>) getUniquelyNamedElements_id4qSf1u1TRfj(node));
      case 1:
        return (T) ((SNode) createSolverTask_id4pkidg67Lgb(node));
      case 2:
        return (T) ((String) getSolvableName_idWieAE6TWOo(node));
      case 3:
        return (T) ((Iterable<SNode>) getDependenciesRelevantForCycleDetection_id59HbAIOYveX(node));
      case 4:
        return (T) ((Set<SNode>) traceBackElementInCycle_id17fjvcLF7UR(node, (SNode) parameters[0]));
      case 5:
        return (T) ((Iterable<SNode>) getIncludedFeatureModels_id4$KkN8iCYUq(node));
      case 6:
        return (T) ((SNode) getContextFeature_id30ECcbtSVMe(node));
      case 7:
        return (T) ((Iterable<SNode>) usingParams_idMYWxk17YoO(node));
      case 8:
        return (T) ((Iterable<SNode>) enumDeclarations_id4eA6KATu5ZO(node));
      case 9:
        return (T) ((Iterable<SNode>) defaultRelationChildren_id4eA6KATXKnM(node));
      case 10:
        return (T) ((Iterable<SNode>) orRelationChildren_id4eA6KAU38cU(node));
      case 11:
        return (T) ((Iterable<SNode>) xorRelationChildren_id4eA6KAU36NL(node));
      case 12:
        return (T) ((Iterable<SNode>) relationChildren_id4eA6KAU3cXl(node, (SEnumerationLiteral) parameters[0]));
      case 13:
        runManually_id3R3AIvumrTm(node, (EditorContext) parameters[0]);
        return null;
      case 14:
        return (T) ((Boolean) showSubResults_id4MH81Y0VldB(node));
      case 15:
        addConstraint_id1GMgmu$nBJk(node, (SNode) parameters[0]);
        return null;
      case 16:
        return (T) ((Iterable<SNode>) constraints_id1wX6IAeW7Y1(node));
      case 17:
        return (T) ((Iterable<SNode>) featureAttributesInConstraints_idZsB2gDAfu$(node));
      case 18:
        remove_id4hLJNwY_IA1(node, (SNode) parameters[0]);
        return null;
      case 19:
        return (T) ((Boolean) containsCycle_id3eg222GEqlF(node));
      case 20:
        return (T) ((Iterable<SNode>) directDependencies_id6Gx9iNnB7_2(node));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept FeatureTreeNode$HV = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172167L, "org.iets3.variability.featuremodel.base.structure.FeatureTreeNode");
    /*package*/ static final SConcept FeatureModelInclude$Iq = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172168L, "org.iets3.variability.featuremodel.base.structure.FeatureModelInclude");
    /*package*/ static final SConcept Feature$D7 = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a307L, "org.iets3.variability.featuremodel.base.structure.Feature");
    /*package*/ static final SConcept EnumType$z = MetaAdapterFactory.getConcept(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x61fe216664a730bbL, "org.iets3.core.expr.toplevel.structure.EnumType");
    /*package*/ static final SConcept AbstractConstraint$MS = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd7eea4cL, "org.iets3.variability.featuremodel.base.structure.AbstractConstraint");
    /*package*/ static final SConcept AttributeRefExpr$VD = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd953cbaL, "org.iets3.variability.featuremodel.base.structure.AttributeRefExpr");
    /*package*/ static final SConcept FeatureAttributeDotTarget$Ko = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd968aaaL, "org.iets3.variability.featuremodel.base.structure.FeatureAttributeDotTarget");
    /*package*/ static final SConcept FeatureModel$X0 = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, "org.iets3.variability.featuremodel.base.structure.FeatureModel");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink root$XEj1 = MetaAdapterFactory.getContainmentLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, 0x375cadc47516a30cL, "root");
    /*package*/ static final SReferenceLink fm$EY24 = MetaAdapterFactory.getReferenceLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172168L, 0x375cadc475172169L, "fm");
    /*package*/ static final SContainmentLink using$qwrH = MetaAdapterFactory.getContainmentLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, 0x7d6d839c2802989aL, "using");
    /*package*/ static final SContainmentLink params$eBc7 = MetaAdapterFactory.getContainmentLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7d6d839c28028b46L, 0x6b367b20f4b339d2L, "params");
    /*package*/ static final SReferenceLink enum$2YBB = MetaAdapterFactory.getReferenceLink(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x61fe216664a730bbL, 0x61fe216664a730f3L, "enum");
    /*package*/ static final SContainmentLink constraints$SJXp = MetaAdapterFactory.getContainmentLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, 0x4c647e983b096ecdL, "constraints");
    /*package*/ static final SReferenceLink attribute$Kd68 = MetaAdapterFactory.getReferenceLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd953cbaL, 0x7cde27c7fd953ccaL, "attribute");
    /*package*/ static final SReferenceLink attribute$Av14 = MetaAdapterFactory.getReferenceLink(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd968aaaL, 0x7cde27c7fd968aabL, "attribute");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty solverTaskRunning$ceHc = MetaAdapterFactory.getProperty(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a211L, 0x59a777a5038d26a0L, "solverTaskRunning");
  }
}
