package org.iets3.variability.featuremodel.base.editor;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.CellAction;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.EditorContext;
import java.util.Objects;
import org.iets3.variability.featuremodel.base.behavior.ICanHaveAttribute__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.iets3.variability.featuremodel.base.behavior.ICanHaveConstraint__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class CustomActions {

  public static CellAction deleteAttributesAction(final SNode icanCanHaveAttribute, final EditorContext editorContext) {
    return new CellAction() {
      @Override
      public String getDescriptionText() {
        return "Remove Attribute";
      }

      @Override
      public boolean executeInCommand() {
        return true;
      }

      @Override
      public boolean canExecute(EditorContext p0) {
        return Objects.equals(editorContext.getSelectedNode().getConcept(), CONCEPTS.AbstractFeatureAttribute$iW);
      }

      @Override
      public void execute(EditorContext ec) {
        SNode selectedNode = ec.getSelectedNode();
        ICanHaveAttribute__BehaviorDescriptor.remove_id1wX6IAfr11e.invoke(icanCanHaveAttribute, SNodeOperations.cast(selectedNode, CONCEPTS.AbstractFeatureAttribute$iW));
      }
    };
  }

  public static boolean constraintsPredicate(SNode sNode) {
    return sNode.isInstanceOfConcept(CONCEPTS.ExpressionConstraint$Nn);
  }

  public static CellAction deleteConstraintAction(final SNode iCanHaveConstraint, final EditorContext editorContext) {
    return new CellAction() {
      @Override
      public String getDescriptionText() {
        return "Delete Constraint";
      }

      @Override
      public boolean executeInCommand() {
        return true;
      }

      @Override
      public boolean canExecute(EditorContext p0) {
        SNode selectedNode = editorContext.getSelectedNode();
        return constraintsPredicate(selectedNode);
      }

      @Override
      public void execute(EditorContext p0) {
        SNode node = editorContext.getSelectedNode();
        SNode constraint = SNodeOperations.getNodeAncestor(((SNode) node), CONCEPTS.AbstractConstraint$MS, true, false);
        if ((constraint != null)) {
          ICanHaveConstraint__BehaviorDescriptor.remove_id4hLJNwY_IA1.invoke(iCanHaveConstraint, constraint);
        }
      }
    };
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractFeatureAttribute$iW = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x36e2718de01a95ffL, "org.iets3.variability.featuremodel.base.structure.AbstractFeatureAttribute");
    /*package*/ static final SConcept ExpressionConstraint$Nn = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd7eea4dL, "org.iets3.variability.featuremodel.base.structure.ExpressionConstraint");
    /*package*/ static final SConcept AbstractConstraint$MS = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x7cde27c7fd7eea4cL, "org.iets3.variability.featuremodel.base.structure.AbstractConstraint");
  }
}
