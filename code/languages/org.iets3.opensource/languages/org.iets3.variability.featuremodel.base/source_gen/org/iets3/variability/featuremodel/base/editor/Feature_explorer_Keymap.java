package org.iets3.variability.featuremodel.base.editor;

/*Generated by MPS */

import jetbrains.mps.editor.runtime.cells.KeyMapImpl;
import jetbrains.mps.openapi.editor.cells.KeyMapAction;
import jetbrains.mps.editor.runtime.cells.KeyMapActionImpl;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.List;
import org.iets3.variability.featuremodel.base.behavior.FeatureTreeNode__BehaviorDescriptor;
import org.iets3.variability.featuremodel.base.behavior.ICanHaveSubFeature__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;

public class Feature_explorer_Keymap extends KeyMapImpl {
  public Feature_explorer_Keymap() {
    this.setApplicableToEveryModel(false);
    KeyMapAction action;
    action = new Feature_explorer_Keymap_Action0();
    this.putAction("none", "VK_TAB", action);
    action = new Feature_explorer_Keymap_Action1();
    this.putAction("shift", "VK_TAB", action);
    action = new Feature_explorer_Keymap_Action2();
    this.putAction("alt", "VK_UP", action);
    this.putAction("alt+shift", "VK_UP", action);
    action = new Feature_explorer_Keymap_Action3();
    this.putAction("alt", "VK_DOWN", action);
    this.putAction("alt+shift", "VK_DOWN", action);
  }
  public static class Feature_explorer_Keymap_Action0 extends KeyMapActionImpl {
    public Feature_explorer_Keymap_Action0() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Move the selected feature one level up (into its previous sibling)";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.Feature$D7))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return !(SNodeOperations.isInstanceOf(SNodeOperations.getPrevSibling(node), CONCEPTS.FeatureModelInclude$Iq));
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      SNode f = FeatureTreeNode__BehaviorDescriptor.effectiveFeature_id6GZHy352t67.invoke(SNodeOperations.cast(SNodeOperations.getPrevSibling(node), CONCEPTS.FeatureTreeNode$HV));
      {
        final SNode subFeatureOwner = f;
        if (SNodeOperations.isInstanceOf(subFeatureOwner, CONCEPTS.ICanHaveSubFeature$Cu)) {
          ICanHaveSubFeature__BehaviorDescriptor.addSubFeature_id1GMgmu$sb6j.invoke(subFeatureOwner, node);
        }
      }
    }
    public String getKeyStroke() {
      return "none TAB";
    }
  }
  public static class Feature_explorer_Keymap_Action1 extends KeyMapActionImpl {
    public Feature_explorer_Keymap_Action1() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Move the selected feature one level down (after its parent)";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.Feature$D7))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return (!(SNodeOperations.isInstanceOf(SNodeOperations.getParent(node), CONCEPTS.FeatureModelInclude$Iq))) && (!(SNodeOperations.isInstanceOf(SNodeOperations.getParent(SNodeOperations.getParent(node)), CONCEPTS.FeatureModelInclude$Iq)));
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      SNodeOperations.insertNextSiblingChild(SNodeOperations.getParent(node), node);
    }
    public String getKeyStroke() {
      return "shift TAB";
    }
  }
  public static class Feature_explorer_Keymap_Action2 extends KeyMapActionImpl {
    public Feature_explorer_Keymap_Action2() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Move the selected feature up (before its previous sibling)";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.Feature$D7))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return !(SNodeOperations.isInstanceOf(SNodeOperations.getPrevSibling(node), CONCEPTS.FeatureModelInclude$Iq));
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      SNodeOperations.insertPrevSiblingChild(SNodeOperations.getPrevSibling(node), node);
    }
    public String getKeyStroke() {
      return "alt UP";
    }
  }
  public static class Feature_explorer_Keymap_Action3 extends KeyMapActionImpl {
    public Feature_explorer_Keymap_Action3() {
      this.setShownInPopupMenu(false);
    }
    public String getDescriptionText() {
      return "Move the selected feature down (after its next sibling)";
    }
    public boolean isMenuAlwaysShown() {
      return false;
    }
    public boolean canExecute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      if ((contextCell == null)) {
        return false;
      }
      SNode contextNode = contextCell.getSNode();
      if (contextNode == null) {
        return false;
      }
      if (!(SNodeOperations.isInstanceOf(contextNode, CONCEPTS.Feature$D7))) {
        return false;
      }
      return this.canExecute_internal(editorContext, contextNode, this.getSelectedNodes(editorContext));
    }
    public void execute(final EditorContext editorContext) {
      EditorCell contextCell = editorContext.getContextCell();
      this.execute_internal(editorContext, contextCell.getSNode(), this.getSelectedNodes(editorContext));
    }
    private boolean canExecute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      return !(SNodeOperations.isInstanceOf(SNodeOperations.getNextSibling(node), CONCEPTS.FeatureModelInclude$Iq));
    }
    private void execute_internal(final EditorContext editorContext, final SNode node, final List<SNode> selectedNodes) {
      SNodeOperations.insertNextSiblingChild(SNodeOperations.getNextSibling(node), node);
    }
    public String getKeyStroke() {
      return "alt DOWN";
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Feature$D7 = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc47516a307L, "org.iets3.variability.featuremodel.base.structure.Feature");
    /*package*/ static final SConcept FeatureModelInclude$Iq = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172168L, "org.iets3.variability.featuremodel.base.structure.FeatureModelInclude");
    /*package*/ static final SConcept FeatureTreeNode$HV = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172167L, "org.iets3.variability.featuremodel.base.structure.FeatureTreeNode");
    /*package*/ static final SInterfaceConcept ICanHaveSubFeature$Cu = MetaAdapterFactory.getInterfaceConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x1b324167a470b175L, "org.iets3.variability.featuremodel.base.structure.ICanHaveSubFeature");
  }
}
