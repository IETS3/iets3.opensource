package org.iets3.core.expr.toplevel.typesystem;

/*Generated by MPS */

import jetbrains.mps.errors.QuickFix_Runtime;
import jetbrains.mps.smodel.SNodePointer;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.iets3.core.expr.base.typesystem.TypingHelper;
import jetbrains.mps.internal.collections.runtime.Sequence;
import org.iets3.core.expr.toplevel.behavior.EnumDeclaration__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.typechecking.TypecheckingFacade;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SConcept;

public class specifyValueType_QuickFix extends QuickFix_Runtime {
  public specifyValueType_QuickFix() {
    super(new SNodePointer("r:8023e40c-26d4-4543-bd46-2ec2c03f861f(org.iets3.core.expr.toplevel.typesystem)", "9173565866057812408"));
  }
  public String getDescription(SNode node) {
    return "Specify the Value Type for the EnumDeclaration";
  }
  public void execute(SNode node) {
    SNode superType = SNodeOperations.as(TypingHelper.calcCommonTypeCore(Sequence.fromIterable(EnumDeclaration__BehaviorDescriptor.effectiveLiterals_idolugnm0Egc.invoke(((SNode) specifyValueType_QuickFix.this.getField("enumDeclaration")[0]))).where((it) -> (SLinkOperations.getTarget(it, LINKS.value$ACwu) != null)).select((it) -> SNodeOperations.as(TypecheckingFacade.getFromContext().getTypeOf(SLinkOperations.getTarget(it, LINKS.value$ACwu)), CONCEPTS.Type$WK))), CONCEPTS.Type$WK);
    SLinkOperations.setTarget(((SNode) specifyValueType_QuickFix.this.getField("enumDeclaration")[0]), LINKS.type$2np9, ((superType != null) ? superType : SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a614L, "org.iets3.core.expr.base.structure.Type"))));

  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink value$ACwu = MetaAdapterFactory.getContainmentLink(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x61fe216664a72ed1L, 0x3f863cbc0116bc84L, "value");
    /*package*/ static final SContainmentLink type$2np9 = MetaAdapterFactory.getContainmentLink(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x61fe216664a72eaeL, 0x2c99d73be0951222L, "type");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Type$WK = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a614L, "org.iets3.core.expr.base.structure.Type");
  }
}
