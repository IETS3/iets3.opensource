package org.iets3.core.expr.toplevel.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractInequationReplacementRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.typesystem.runtime.IsApplicable2Status;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.typechecking.TypecheckingFacade;
import org.iets3.core.expr.base.behavior.ITypeable__BehaviorDescriptor;
import jetbrains.mps.typesystem.inference.EquationInfo;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SConcept;

public class inlineRecords_InequationReplacementRule extends AbstractInequationReplacementRule_Runtime {
  public inlineRecords_InequationReplacementRule() {
  }
  public boolean isApplicableCustom(SNode subtype, SNode supertype, IsApplicable2Status status) {
    if (ListSequence.fromList(SLinkOperations.getChildren(subtype, LINKS.members$CyZq)).count() != ListSequence.fromList(SLinkOperations.getChildren(supertype, LINKS.members$CyZq)).count()) {
      return false;
    }
    for (SNode m1 : ListSequence.fromList(SLinkOperations.getChildren(subtype, LINKS.members$CyZq))) {
      SNode m2 = ListSequence.fromList(SLinkOperations.getChildren(supertype, LINKS.members$CyZq)).getElement(SNodeOperations.getIndexInParent(m1));
      if (!(SPropertyOperations.getString(m1, PROPS.name$MnvL).equals(SPropertyOperations.getString(m2, PROPS.name$MnvL)))) {
        return false;
      }
      if (!(TypecheckingFacade.getFromContext().isSubtype(ITypeable__BehaviorDescriptor.type_id4WLweXm3SW5.invoke(m1), ITypeable__BehaviorDescriptor.type_id4WLweXm3SW5.invoke(m2)))) {
        return false;
      }
    }
    return true;
  }
  public void processInequation(final SNode subtype, final SNode supertype, final EquationInfo equationInfo, final TypeCheckingContext typeCheckingContext, IsApplicable2Status status, final boolean inequalityIsWeak, final boolean inequalityIsLessThan) {
  }
  public boolean checkInequation(final SNode subtype, final SNode supertype, final EquationInfo equationInfo, IsApplicable2Status status, final boolean inequalityIsWeak, final boolean inequalityIsLessThan) {
    boolean result_14532009 = true;
    return result_14532009;
  }
  public boolean isWeak() {
    return true;
  }
  public IsApplicableStatus isApplicableSubtypeAndPattern(SNode node) {
    return new IsApplicableStatus(node.getConcept().isSubConceptOf(getApplicableSubtypeConcept()), null);
  }
  public IsApplicableStatus isApplicableSupertypeAndPattern(SNode node) {
    return new IsApplicableStatus(node.getConcept().isSubConceptOf(getApplicableSupertypeConcept()), null);
  }

  public SAbstractConcept getApplicableSubtypeConcept() {
    return CONCEPTS.InlineRecordType$m;
  }
  public SAbstractConcept getApplicableSupertypeConcept() {
    return CONCEPTS.InlineRecordType$m;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink members$CyZq = MetaAdapterFactory.getContainmentLink(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x73194702f12a0ccfL, 0x465d5f0112fe4619L, "members");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept InlineRecordType$m = MetaAdapterFactory.getConcept(0x71934284d7d145eeL, 0xa0548c072591085fL, 0x73194702f12a0ccfL, "org.iets3.core.expr.toplevel.structure.InlineRecordType");
  }
}
