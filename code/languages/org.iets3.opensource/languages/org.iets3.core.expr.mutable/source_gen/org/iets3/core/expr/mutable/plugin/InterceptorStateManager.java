package org.iets3.core.expr.mutable.plugin;

/*Generated by MPS */

import java.util.Map;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import com.mbeddr.mpsutil.interpreter.rt.IContext;
import com.mbeddr.mpsutil.interpreter.rt.ComputationTrace;
import org.iets3.core.expr.mutable.behavior.IInterceptor__BehaviorDescriptor;

public class InterceptorStateManager {

  private Map<SNode, InterceptorState> interceptorStates = MapSequence.fromMap(new HashMap<SNode, InterceptorState>());

  public InterceptorState getState(SNode interceptor, IContext ctx, ComputationTrace trace) {
    InterceptorState state = MapSequence.fromMap(interceptorStates).get(interceptor);
    if (state == null) {
      state = IInterceptor__BehaviorDescriptor.createStateObject_id4IV0h47VEDy.invoke(interceptor, ctx, trace);
      MapSequence.fromMap(interceptorStates).put(interceptor, state);
    }
    return state;
  }

  public InterceptorState updateState(SNode interceptor, InterceptorState newState) {
    return MapSequence.fromMap(interceptorStates).put(interceptor, newState);
  }

  public InterceptorStateManager copy() {
    InterceptorStateManager copy = new InterceptorStateManager();
    MapSequence.fromMap(copy.interceptorStates).putAll(this.interceptorStates);
    return copy;
  }




}
