package org.iets3.core.expr.mutable.plugin;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import com.mbeddr.mpsutil.interpreter.rt.IContext;
import org.iets3.core.expr.mutable.behavior.IInteractor__BehaviorDescriptor;
import com.mbeddr.mpsutil.interpreter.rt.ComputationTrace;
import com.mbeddr.mpsutil.interpreter.rt.NullCoverageAnalyzer;
import org.iets3.core.expr.base.plugin.MessageValue;
import java.util.List;
import org.iets3.core.expr.base.behavior.IETS3ExprContext;
import com.mbeddr.mpsutil.interpreter.rt.ICoverageAnalyzer;

public abstract class InteractorValue implements ITransactionalValue {

  public static SNode THIS = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x10802efe25aL, "jetbrains.mps.lang.core.structure.BaseConcept"));

  private SNode myInteractor;
  protected IContext interpreterCtx;

  public InteractorValue(SNode interactor, IContext ctx) {
    myInteractor = interactor;
    interpreterCtx = ctx;
  }

  public InteractionDescriptor getDescriptor() {
    return IInteractor__BehaviorDescriptor.getDescriptor_id5y3VELft_Ye.invoke(myInteractor);
  }

  public InteractionDescriptor d() {
    return getDescriptor();
  }

  public Object eval(SNode n, ComputationTrace trace) {
    return interpreterCtx.getRootInterpreter().evaluate(n, interpreterCtx, new NullCoverageAnalyzer(), trace, false);
  }

  public void reportInvalidCommand(String message, ComputationTrace trace) {
    throw new InvalidCommandException(this, myInteractor, new MessageValue(message, myInteractor), interpreterCtx, trace);
  }

  public SNode interactor() {
    return this.myInteractor;
  }

  public abstract Object handleElement(IDElement element, List<Object> payload, List<ContextValue> contexts, IETS3ExprContext ctx, ICoverageAnalyzer coverage, ComputationTrace trace);

  public boolean currentlyAllowsThisElement(IDElement element) {
    return true;
  }

  public abstract Object getSubstate(SNode n, IContext ctx, ComputationTrace trace);

}
