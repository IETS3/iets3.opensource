package org.iets3.core.expr.repl.editor;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.CellAction;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.references.BLOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.iets3.core.expr.repl.behavior.Sheet__BehaviorDescriptor;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class SheetInsertRowAction implements CellAction {

  private SNode sheet;
  private int rowIndex;
  private boolean before;

  public SheetInsertRowAction(SNode sheet, int rowIndex, boolean before) {
    this.sheet = sheet;
    this.rowIndex = rowIndex;
    this.before = before;
  }

  @Override
  public String getDescriptionText() {
    return "insert new row";
  }
  @Override
  public boolean executeInCommand() {
    return true;
  }

  @Override
  public boolean canExecute(EditorContext context) {
    return true;
  }

  @Override
  public void execute(EditorContext context) {
    BLOperations.getAndIncrement_int(SPropertyOperations.intPropRef(sheet, PROPS.NUM_ROWS$ohhn));
    int y = (before ? rowIndex - 1 : rowIndex);
    for (int x = 0; x < SPropertyOperations.getInteger(sheet, PROPS.NUM_COLS$obaX); x++) {
      Sheet__BehaviorDescriptor.setCell_id74LepNSqhZb.invoke(sheet, createCell_ns9opo_a0a0a2a21(), ((int) x), ((int) y));
    }
  }
  private static SNode createCell_ns9opo_a0a0a2a21() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.Cell$3y);
    return n0.getResult();
  }

  private static final class PROPS {
    /*package*/ static final SProperty NUM_ROWS$ohhn = MetaAdapterFactory.getProperty(0x18001c9433a74f68L, 0xa7c1ffddc4b39be1L, 0x586a62ac9b580ccbL, 0x529f594e6b92c084L, "NUM_ROWS");
    /*package*/ static final SProperty NUM_COLS$obaX = MetaAdapterFactory.getProperty(0x18001c9433a74f68L, 0xa7c1ffddc4b39be1L, 0x586a62ac9b580ccbL, 0x529f594e6b92c07fL, "NUM_COLS");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Cell$3y = MetaAdapterFactory.getConcept(0x18001c9433a74f68L, 0xa7c1ffddc4b39be1L, 0x586a62ac9b582a48L, "org.iets3.core.expr.repl.structure.Cell");
  }
}
