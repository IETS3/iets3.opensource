package org.iets3.core.expr.typetags.bindingtime.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import java.util.List;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import java.util.Objects;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SProperty;

public final class BTtag__BehaviorDescriptor extends BaseBHDescriptor {
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1e22ec1660262d98L, "org.iets3.core.expr.typetags.bindingtime.structure.BTtag");

  public static final SMethod<SNode> getDefault_id1WJTL5jvcNW = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("getDefault").modifiers(9, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(2247268800682315004L).languageId(0xa9df73d9e86c27d3L, 0x5186c6ce428c4f09L).build2();
  public static final SMethod<Boolean> subsumes_id1RcasK0V7Pl = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("subsumes").modifiers(9, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(2147137078514449749L).languageId(0xa9df73d9e86c27d3L, 0x5186c6ce428c4f09L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""), SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<SAbstractConcept> getGroupingTagConcept_idx_aN5M65iL = new SMethodBuilder<SAbstractConcept>(new SJavaCompoundTypeImpl((Class<SAbstractConcept>) ((Class) Object.class))).name("getGroupingTagConcept").modifiers(9, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(604937216318788785L).languageId(0xa9df73d9e86c27d3L, 0x5186c6ce428c4f09L).build2();
  public static final SMethod<String> getName_id76ZhK6XVfon = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getName").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(8196347919644554775L).languageId(0xa9df73d9e86c27d3L, 0x5186c6ce428c4f09L).build2();
  public static final SMethod<Boolean> wasBefore_id35Mye9KoWWW = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("wasBefore").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(3563060761333059388L).languageId(0xace21e08bb47d03dL, 0x9c3cc6fbae5e46d1L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Boolean> groupBefore_id5XGFpL9V4bu = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("groupBefore").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6876061617854628574L).languageId(0xace21e08bb47d03dL, 0x9c3cc6fbae5e46d1L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(getDefault_id1WJTL5jvcNW, subsumes_id1RcasK0V7Pl, getGroupingTagConcept_idx_aN5M65iL, getName_id76ZhK6XVfon, wasBefore_id35Mye9KoWWW, groupBefore_id5XGFpL9V4bu);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static SNode getDefault_id1WJTL5jvcNW(@NotNull SAbstractConcept __thisConcept__) {
    return SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1e22ec1660262d98L, "org.iets3.core.expr.typetags.bindingtime.structure.BTtag"));
  }
  /*package*/ static boolean subsumes_id1RcasK0V7Pl(@NotNull SAbstractConcept __thisConcept__, SNode sub, SNode sup) {
    // subsumption can only happen on the level of binding times
    if (!(SNodeOperations.isInstanceOf(sub, CONCEPTS.BTtag$DF)) || !(SNodeOperations.isInstanceOf(sup, CONCEPTS.BTtag$DF))) {
      return false;
    }
    SNode subRef = SNodeOperations.cast(sub, CONCEPTS.BTtag$DF);
    SNode supRef = SNodeOperations.cast(sup, CONCEPTS.BTtag$DF);
    // subRef Bindingtime is null --> default value was used for non-tagged expression
    if (SLinkOperations.getTarget(subRef, LINKS.bindingtime$RIRF) == null) {
      return true;
    }
    // supRef bindingtime is null --> not yet created time used as input
    if (SLinkOperations.getTarget(supRef, LINKS.bindingtime$RIRF) == null) {
      return false;
    }
    // sub subsumes sup if sub is a binding time happening before sup
    return (boolean) BTtag__BehaviorDescriptor.wasBefore_id35Mye9KoWWW.invoke(subRef, SLinkOperations.getTarget(supRef, LINKS.bindingtime$RIRF));
  }
  /*package*/ static SAbstractConcept getGroupingTagConcept_idx_aN5M65iL(@NotNull SAbstractConcept __thisConcept__) {
    return CONCEPTS.BTtag$DF;
  }
  /*package*/ static String getName_id76ZhK6XVfon(@NotNull SNode __thisNode__) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(__thisNode__, LINKS.bindingtime$RIRF), PROPS.name$MnvL);
  }
  /*package*/ static boolean wasBefore_id35Mye9KoWWW(@NotNull SNode __thisNode__, SNode supremum) {
    // Default tag was created
    if (supremum == null) {
      return false;
    }
    // same tag --> wasBefore is reflexive
    if (Objects.equals(SLinkOperations.getTarget(__thisNode__, LINKS.bindingtime$RIRF), supremum)) {
      return true;
    }
    // Current supremum is initial and no group assigned to it
    if (SPropertyOperations.getBoolean(supremum, PROPS.initial$ccDb) && SLinkOperations.getTarget(supremum, LINKS.group$rnlZ) == null) {
      return false;
    }
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(supremum, LINKS.previous$ZZzV), CONCEPTS.BTGroupStageRef$W7)) {
      if (SLinkOperations.getTarget(SLinkOperations.getTarget(__thisNode__, LINKS.bindingtime$RIRF), LINKS.group$rnlZ) == null) {
        // Error case: No group assigned to this binding time
        return false;
      }
      // Default case: Compare groups instead
      return ((boolean) BTtag__BehaviorDescriptor.groupBefore_id5XGFpL9V4bu.invoke(__thisNode__, SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(supremum, LINKS.previous$ZZzV), CONCEPTS.BTGroupStageRef$W7), LINKS.group$H5rL)));
    }
    return ((boolean) BTtag__BehaviorDescriptor.wasBefore_id35Mye9KoWWW.invoke(__thisNode__, SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(supremum, LINKS.previous$ZZzV), CONCEPTS.BTDeclarationRef$J2), LINKS.stage$GYTh)));
  }
  /*package*/ static boolean groupBefore_id5XGFpL9V4bu(@NotNull SNode __thisNode__, SNode group) {
    if (group == null) {
      return false;
    }
    if (Objects.equals(SLinkOperations.getTarget(SLinkOperations.getTarget(SLinkOperations.getTarget(__thisNode__, LINKS.bindingtime$RIRF), LINKS.group$rnlZ), LINKS.group$5h6h), group)) {
      return true;
    }
    if (SPropertyOperations.getBoolean(group, PROPS.initial$OMgP)) {
      return false;
    }
    return ((boolean) BTtag__BehaviorDescriptor.groupBefore_id5XGFpL9V4bu.invoke(__thisNode__, SLinkOperations.getTarget(SLinkOperations.getTarget(group, LINKS.previous$OMIR), LINKS.group$5h6h)));
  }

  /*package*/ BTtag__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 3:
        return (T) ((String) getName_id76ZhK6XVfon(node));
      case 4:
        return (T) ((Boolean) wasBefore_id35Mye9KoWWW(node, (SNode) parameters[0]));
      case 5:
        return (T) ((Boolean) groupBefore_id5XGFpL9V4bu(node, (SNode) parameters[0]));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 0:
        return (T) ((SNode) getDefault_id1WJTL5jvcNW(concept));
      case 1:
        return (T) ((Boolean) subsumes_id1RcasK0V7Pl(concept, (SNode) parameters[0], (SNode) parameters[1]));
      case 2:
        return (T) ((SAbstractConcept) getGroupingTagConcept_idx_aN5M65iL(concept));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept BTtag$DF = MetaAdapterFactory.getConcept(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1e22ec1660262d98L, "org.iets3.core.expr.typetags.bindingtime.structure.BTtag");
    /*package*/ static final SConcept BTGroupStageRef$W7 = MetaAdapterFactory.getConcept(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1f9fc88698ea790fL, "org.iets3.core.expr.typetags.bindingtime.structure.BTGroupStageRef");
    /*package*/ static final SConcept BTDeclarationRef$J2 = MetaAdapterFactory.getConcept(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1f9fc88698ea7909L, "org.iets3.core.expr.typetags.bindingtime.structure.BTDeclarationRef");
  }

  private static final class LINKS {
    /*package*/ static final SReferenceLink bindingtime$RIRF = MetaAdapterFactory.getReferenceLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1e22ec1660262d98L, 0x1e22ec166026864eL, "bindingtime");
    /*package*/ static final SContainmentLink group$rnlZ = MetaAdapterFactory.getContainmentLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x275e2c4e8512f931L, 0x1f9fc88698e852d0L, "group");
    /*package*/ static final SContainmentLink previous$ZZzV = MetaAdapterFactory.getContainmentLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x275e2c4e8512f931L, 0x1f9fc88698ea76feL, "previous");
    /*package*/ static final SReferenceLink group$H5rL = MetaAdapterFactory.getReferenceLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1f9fc88698ea790fL, 0x1f9fc88698ea7910L, "group");
    /*package*/ static final SReferenceLink stage$GYTh = MetaAdapterFactory.getReferenceLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1f9fc88698ea7909L, 0x1f9fc88698ea790aL, "stage");
    /*package*/ static final SReferenceLink group$5h6h = MetaAdapterFactory.getReferenceLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x1f9fc88698e852cdL, 0x1f9fc88698e852ceL, "group");
    /*package*/ static final SContainmentLink previous$OMIR = MetaAdapterFactory.getContainmentLink(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x10ce4430db7b5cf7L, 0x5f6cad9c49e6d8d5L, "previous");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
    /*package*/ static final SProperty initial$ccDb = MetaAdapterFactory.getProperty(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x275e2c4e8512f931L, 0x275e2c4e851485dcL, "initial");
    /*package*/ static final SProperty initial$OMgP = MetaAdapterFactory.getProperty(0x9c3cc6fbae5e46d1L, 0xace21e08bb47d03dL, 0x10ce4430db7b5cf7L, 0x5f6cad9c49e6d8d3L, "initial");
  }
}
