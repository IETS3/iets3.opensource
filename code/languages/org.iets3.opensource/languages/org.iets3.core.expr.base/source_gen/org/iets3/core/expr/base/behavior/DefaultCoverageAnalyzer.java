package org.iets3.core.expr.base.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.awt.Color;
import java.util.List;
import java.util.Set;
import org.jetbrains.mps.openapi.language.SLanguage;

/**
 * Previous implementation of {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer }.
 * Tries hard to maintain public API, and quirks from mixing instance / static implementation.
 */
public class DefaultCoverageAnalyzer extends DefaultCoverageAnalyzerBase {
  public static class ConceptData extends DefaultCoverageAnalyzerBase.ConceptDataBase {
    public ConceptData(SAbstractConcept ccc) {
      super(ccc);
    }
  }

  public static class ValueCoverage extends DefaultCoverageAnalyzerBase.ValueCoverageBase {
    public ValueCoverage(String n, _FunctionTypes._return_P2_E0<? extends Boolean, ? super Object, ? super Object> predicate) {
      super(n, predicate);
    }

    public ValueCoverage(String n, _FunctionTypes._return_P2_E0<? extends Boolean, ? super Object, ? super Object> pred, _FunctionTypes._return_P1_E0<? extends Object, ? super Object> vc) {
      super(n, pred, vc);
    }
  }

  public static class ValueStatistics extends DefaultCoverageAnalyzerBase.ValueStatisticsBase {
  }

  public class NodeCoverage extends DefaultCoverageAnalyzerBase.NodeCoverageBase {
    public NodeCoverage(SNode node) {
      super(node);
    }

    public NodeCoverage(SNode node, String status) {
      super(node, status);
    }

    @NotNull
    @Override
    protected IDefaultCoverageAnalyzer.INodeCoverage getNodeCoverage(@NotNull SNode node) {
      return IDefaultCoverageAnalyzer.getNodeCoverage(node);
    }

    @Override
    protected boolean isNodeCovered(@NotNull SNode node) {
      return IDefaultCoverageAnalyzer.isNodeCovered(node);
    }
    @Override
    protected boolean isNodePartiallyCovered(@NotNull SNode node) {
      return IDefaultCoverageAnalyzer.isNodePartiallyCovered(node);
    }
  }

  public DefaultCoverageAnalyzer() {
  }

  @Override
  public Iterable<IDefaultCoverageAnalyzer.IConceptData> getAllConceptsStatus() {
    Iterable<SAbstractConcept> allConcepts = getAllConcepts();
    if (!(isThisGlobalInstance())) {
      allConcepts = Sequence.fromIterable(allConcepts).concat(ListSequence.fromList(IDefaultCoverageAnalyzer.allConcepts()));
    }
    return Sequence.fromIterable(allConcepts).select((it) -> {
      IDefaultCoverageAnalyzer.IConceptData ccc = getVisitedConcepts(it);
      if (ccc == null) {
        return new ConceptData(it);
      }
      return ccc;
    });
  }

  @Override
  public boolean hasNodeCoverageEx(SNode node) {
    if (super.hasNodeCoverageEx(node)) {
      return true;
    }
    return (isThisGlobalInstance() ? false : IDefaultCoverageAnalyzer.hasNodeCoverage(node));
  }

  @Override
  public boolean isNodeCoveredEx(@NotNull SNode node) {
    if (super.isNodeCoveredEx(node)) {
      return true;
    }
    return (isThisGlobalInstance() ? false : IDefaultCoverageAnalyzer.isNodeCovered(node));
  }

  @Override
  public boolean isNodePartiallyCoveredEx(@NotNull SNode node) {
    if (super.isNodePartiallyCoveredEx(node)) {
      return true;
    }
    return (isThisGlobalInstance() ? false : IDefaultCoverageAnalyzer.isNodePartiallyCovered(node));
  }

  @Override
  public boolean isNodeNotCoveredEx(@NotNull SNode node) {
    if (super.isNodeNotCoveredEx(node)) {
      return true;
    }
    return (isThisGlobalInstance() ? false : IDefaultCoverageAnalyzer.isNodeNotCovered(node));
  }

  public boolean isInterestingConceptEx(@NotNull SNode n) {
    if (super.isInterestingConceptEx(n)) {
      return true;
    }
    return (isThisGlobalInstance() ? false : IDefaultCoverageAnalyzer.isInterestingConcept(n));
  }

  @Override
  public void coverValue(@Nullable SNode interpretedNode, Object evaluatedValue) {
    if (interpretedNode == null) {
      return;
    }
    super.coverValue(interpretedNode, evaluatedValue);

    IDefaultCoverageAnalyzer.recordValueStatistic(evaluatedValue);
    IDefaultCoverageAnalyzer.visitNode(interpretedNode);
    IDefaultCoverageAnalyzer.getInstance().visitedConcept(SNodeOperations.getConcept(interpretedNode));
  }

  private boolean isThisGlobalInstance() {
    return IDefaultCoverageAnalyzer.getInstance() == this;
  }

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#COVERED }
   */
  @Deprecated
  public static final String COVERED = IDefaultCoverageAnalyzer.COVERED;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#MISSING }
   */
  @Deprecated
  public static final String MISSING = IDefaultCoverageAnalyzer.MISSING;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#PARTIAL }
   */
  @Deprecated
  public static final String PARTIAL = IDefaultCoverageAnalyzer.PARTIAL;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#IGNORED }
   */
  @Deprecated
  public static final String IGNORED = IDefaultCoverageAnalyzer.IGNORED;

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#COVERED_COLOR }
   */
  @Deprecated
  public static final Color COVERED_COLOR = IDefaultCoverageAnalyzer.COVERED_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#MISSING_COLOR }
   */
  @Deprecated
  public static final Color MISSING_COLOR = IDefaultCoverageAnalyzer.MISSING_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#PARTIAL_COLOR }
   */
  @Deprecated
  public static final Color PARTIAL_COLOR = IDefaultCoverageAnalyzer.PARTIAL_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#IGNORED_COLOR }
   */
  @Deprecated
  public static final Color IGNORED_COLOR = IDefaultCoverageAnalyzer.IGNORED_COLOR;

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#CODE_COVERED_COLOR }
   */
  @Deprecated
  public static final Color CODE_COVERED_COLOR = IDefaultCoverageAnalyzer.CODE_COVERED_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#CODE_MISSING_COLOR }
   */
  @Deprecated
  public static final Color CODE_MISSING_COLOR = IDefaultCoverageAnalyzer.CODE_MISSING_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#CODE_PARTIAL_COLOR }
   */
  @Deprecated
  public static final Color CODE_PARTIAL_COLOR = IDefaultCoverageAnalyzer.CODE_PARTIAL_COLOR;
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#CODE_IGNORE }
   */
  @Deprecated
  public static final Color CODE_IGNORE = IDefaultCoverageAnalyzer.CODE_IGNORE;

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#ratio() }
   */
  @Deprecated
  public static int ratio() {
    return IDefaultCoverageAnalyzer.ratio();
  }

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#reset() }
   */
  @Deprecated
  public static void reset() {
    IDefaultCoverageAnalyzer.reset();
  }

  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#getInstance() }
   */
  @NotNull
  @Deprecated
  public static DefaultCoverageAnalyzer getInstance() {
    return (DefaultCoverageAnalyzer) IDefaultCoverageAnalyzer.getInstance();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#allConcepts() }
   */
  @Deprecated
  public static List<SAbstractConcept> allConcepts() {
    return IDefaultCoverageAnalyzer.allConcepts();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#missingConceptsOrIncomplete() }
   */
  @Deprecated
  public static Iterable<ConceptData> missingConceptsOrIncomplete() {
    return (Iterable<ConceptData>) IDefaultCoverageAnalyzer.missingConceptsOrIncomplete();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#allConceptsStatus() }
   */
  @Deprecated
  public static Iterable<ConceptData> allConceptsStatus() {
    return (Iterable<ConceptData>) IDefaultCoverageAnalyzer.allConceptsStatus();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#allCoveredNodes() }
   */
  @Deprecated
  public static Set<SNode> allCoveredNodes() {
    return IDefaultCoverageAnalyzer.allCoveredNodes();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#hasNodeCoverage(SNode) }
   */
  @Deprecated
  public static boolean hasNodeCoverage(SNode node) {
    return IDefaultCoverageAnalyzer.hasNodeCoverage(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#getNodeCoverage(SNode) }
   */
  @Deprecated
  public static NodeCoverage getNodeCoverage(SNode node) {
    return (NodeCoverage) IDefaultCoverageAnalyzer.getNodeCoverage(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isNodeCovered(SNode) }
   */
  @Deprecated
  public static boolean isNodeCovered(SNode node) {
    return IDefaultCoverageAnalyzer.isNodeCovered(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isNodePartiallyCovered(SNode) }
   */
  @Deprecated
  public static boolean isNodePartiallyCovered(SNode node) {
    return IDefaultCoverageAnalyzer.isNodePartiallyCovered(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isNodeNotCovered(SNode) }
   */
  @Deprecated
  public static boolean isNodeNotCovered(SNode node) {
    return IDefaultCoverageAnalyzer.isNodeNotCovered(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#visitNode(SNode) }
   */
  @Deprecated
  public static void visitNode(SNode node) {
    IDefaultCoverageAnalyzer.visitNode(node);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#registerLanguage(SLanguage) }
   */
  @Deprecated
  public static void registerLanguage(SLanguage l) {
    IDefaultCoverageAnalyzer.registerLanguage(l);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#registerIgnoredConcept(SAbstractConcept) }
   */
  @Deprecated
  public static void registerIgnoredConcept(SAbstractConcept c) {
    IDefaultCoverageAnalyzer.registerIgnoredConcept(c);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#registerMeasuredConcept(SAbstractConcept) }
   */
  @Deprecated
  public static void registerMeasuredConcept(SAbstractConcept c) {
    IDefaultCoverageAnalyzer.registerMeasuredConcept(c);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isInInterestingContext(SNode) }
   */
  @Deprecated
  public static boolean isInInterestingContext(SNode n) {
    return IDefaultCoverageAnalyzer.isInInterestingContext(n);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isInterestingConcept(SNode) }
   */
  @Deprecated
  public static boolean isInterestingConcept(SNode n) {
    return IDefaultCoverageAnalyzer.isInterestingConcept(n);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#getValueStatistics() }
   */
  @Deprecated
  public static ValueStatistics getValueStatistics() {
    return (ValueStatistics) IDefaultCoverageAnalyzer.getValueStatistics();
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#isIgnored(SNode) }
   */
  @Deprecated
  public static boolean isIgnored(SNode n) {
    return IDefaultCoverageAnalyzer.isIgnored(n);
  }
  /**
   * 
   * @deprecated use {@link org.iets3.core.expr.base.behavior.IDefaultCoverageAnalyzer#hasData() }
   */
  @Deprecated
  public static boolean hasData() {
    return IDefaultCoverageAnalyzer.hasData();
  }
}
