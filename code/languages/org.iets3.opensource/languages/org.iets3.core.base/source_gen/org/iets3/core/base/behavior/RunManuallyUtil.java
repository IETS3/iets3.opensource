package org.iets3.core.base.behavior;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.List;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import de.slisson.mps.hacks.editor.EditorComponentHacks;

public class RunManuallyUtil {

  public static void updateEditors(final EditorContext edCtxOrNull, Iterable<SNode> nodes) {
    Sequence.fromIterable(nodes).visitAll((it) -> ICanRunCheckManually__BehaviorDescriptor.performAdditionalEditorUpdate_id3JvidvJx7iM.invoke(it, edCtxOrNull));
    rebuildAffectedEditors(nodes);
  }

  private static void rebuildAffectedEditors(Iterable<SNode> nodes) {
    final List<SNode> roots = Sequence.fromIterable(nodes).select((it) -> SNodeOperations.getContainingRoot(it)).distinct().toList();
    ListSequence.fromList(EditorComponentHacks.findAllInstances()).where((it) -> ListSequence.fromList(roots).contains(it.getRootCell().getSNode())).visitAll((it) -> it.update());
  }
}
