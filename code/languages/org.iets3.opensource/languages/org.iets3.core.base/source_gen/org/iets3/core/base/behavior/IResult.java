package org.iets3.core.base.behavior;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.Collections;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.Objects;

public interface IResult {

  boolean isOk();

  Object getErrorMessage();
  /**
   * 
   * @deprecated 
   */
  @Deprecated(since = "17.10.2024")
  AbstractResultDescription getDescription();

  default Iterable<IResult> getSubResults() {
    return ListSequence.fromList(new ArrayList<IResult>());
  }

  default MessageType messageType() {
    return MessageType.OK;
  }

  default Iterable<SNode> targetNodes() {
    return Collections.emptyList();
  }

  default IResult cloneWithTargetFilter(final _FunctionTypes._return_P1_E0<? extends Boolean, ? super SNode> targetNodeFilter) {
    Iterable<SNode> targetNodesFiltered = Sequence.fromIterable(this.targetNodes()).where((it) -> targetNodeFilter.invoke(it));
    return IResult.make(this.isOk(), this.messageType(), this.getErrorMessage(), targetNodesFiltered, this.getDescription());
  }

  static IResult make(final MessageType messageType, final Object errorMsg, final Iterable<SNode> targetNodes, final AbstractResultDescription desc) {
    return IResult.make(Objects.equals(messageType, MessageType.OK), messageType, errorMsg, targetNodes, desc);
  }

  static IResult make(final boolean isOK, final MessageType messageType, final Object errorMsg, final Iterable<SNode> targetNodes, final AbstractResultDescription desc) {
    return new IResult() {
      @Override
      public boolean isOk() {
        return isOK;
      }

      @Override
      public Object getErrorMessage() {
        return errorMsg;
      }

      @Override
      public AbstractResultDescription getDescription() {
        return desc;
      }
      @Override
      public MessageType messageType() {
        return messageType;
      }
      @Override
      public Iterable<SNode> targetNodes() {
        return targetNodes;
      }
    };
  }


  enum MessageType {
    Timeout(false),
    Error(false),
    Warning(false),
    Info(true),
    OK(true),
    Cancelled(false);

    public boolean isSuccess;
    MessageType(boolean isSuccess) {
      this.isSuccess = isSuccess;
    }
  }
}
