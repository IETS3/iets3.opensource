package org.iets3.variability.configuration.base.intentions;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import org.iets3.variability.configuration.base.plugin.FeatureModelIncludeUtil;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SConcept;

public class IntentionUtilConfiguration {
  private static boolean includeNotBoundByInheritance(SNode node) {
    // There is no FMC which is extended such that the considered Include is already bound there
    return FeatureModelIncludeUtil.findExtendedConfigWithSameTargetFeature(node).filter((p1) -> !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(p1, LINKS.content$Wdfq), CONCEPTS.FeatureModelConfigurationBase$y8))).isEmpty();
  }

  public static boolean isApplicableReplaceWithUnspecifiedConfig(SNode node) {
    return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node, LINKS.targetFeature$16lA), CONCEPTS.FeatureModelInclude$Iq) && !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node, LINKS.content$Wdfq), CONCEPTS.FeatureModelConfigurationBase$y8)) && IntentionUtilConfiguration.includeNotBoundByInheritance(node);
  }

  public static boolean isApplicableInlineReferencedConfiguration(SNode node) {
    return (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node, LINKS.content$Wdfq), CONCEPTS.FeatureModelConfigurationRef$kq) || SNodeOperations.isInstanceOf(SLinkOperations.getTarget(node, LINKS.content$Wdfq), CONCEPTS.FeatureModelConfigurationBase$y8)) && !(IntentionUtilConfiguration.inheritancePreventsInlining(node));
  }

  private static boolean inheritancePreventsInlining(SNode config) {
    return FeatureModelIncludeUtil.findExtendedConfigWithSameTargetFeature(config).filter((p1) -> !(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(p1, LINKS.content$Wdfq), CONCEPTS.InlineFeatureConfigurationContent$P5))).isPresent();
  }

  public static boolean isApplicableAdaptToExtendedFMC(SNode fmc) {
    return (SLinkOperations.getTarget(fmc, LINKS.extendedFMC$tFbw) != null);
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink content$Wdfq = MetaAdapterFactory.getContainmentLink(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x302aa0c2ddab8940L, 0x5cf5c0d0479f4bc8L, "content");
    /*package*/ static final SReferenceLink targetFeature$16lA = MetaAdapterFactory.getReferenceLink(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x302aa0c2ddab8940L, 0x5cf5c0d0479ec91eL, "targetFeature");
    /*package*/ static final SContainmentLink extendedFMC$tFbw = MetaAdapterFactory.getContainmentLink(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x5cf5c0d0479ec915L, 0x4617323a864bd075L, "extendedFMC");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept FeatureModelConfigurationBase$y8 = MetaAdapterFactory.getConcept(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x2e34d227ff954d8bL, "org.iets3.variability.configuration.base.structure.FeatureModelConfigurationBase");
    /*package*/ static final SConcept FeatureModelInclude$Iq = MetaAdapterFactory.getConcept(0x165f1d0525064544L, 0x895e1424f54166ecL, 0x375cadc475172168L, "org.iets3.variability.featuremodel.base.structure.FeatureModelInclude");
    /*package*/ static final SConcept FeatureModelConfigurationRef$kq = MetaAdapterFactory.getConcept(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x5cf5c0d0479eed6aL, "org.iets3.variability.configuration.base.structure.FeatureModelConfigurationRef");
    /*package*/ static final SConcept InlineFeatureConfigurationContent$P5 = MetaAdapterFactory.getConcept(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x5cf5c0d0479f4bfcL, "org.iets3.variability.configuration.base.structure.InlineFeatureConfigurationContent");
  }
}
