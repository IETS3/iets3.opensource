package org.iets3.variability.configuration.base.behavior;

/*Generated by MPS */

import java.util.List;
import java.util.Collections;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;

/**
 * Represents a transformation on a tree node.
 */
public class Action {
  private List<Action> children = Collections.emptyList();
  private List<SNode> configurationExchangesCandidates = Collections.emptyList();

  public Action() {
  }

  public Action(List<Action> children) {
    this.children = children;
  }

  public Action(List<SNode> nodesToMove, List<Action> children) {
    this(children);
    this.configurationExchangesCandidates = nodesToMove;
  }

  public void registerByFeature(final ConfigurationExchange configurationExchange) {
    ListSequence.fromList(this.configurationExchangesCandidates).visitAll((it) -> configurationExchange.registerByFeature(it));
    ListSequence.fromList(this.children).visitAll((it) -> it.registerByFeature(configurationExchange));
  }
  /**
   * Allow the action to transform itself if necessary. This is the only chance to take nodes from the configurationexchange.
   */
  public Action alternativeAction(ConfigurationExchange market) {
    return this;
  }
  /**
   * Apply changes to the underlying config node(s). This is the only stage (except sortChildren()) where it is allowed
   * to modify the nodes.
   * If this method is not overriden, all actions of the implementor must be reduced.
   * 
   * @see org.iets3.variability.configuration.base.behavior.Action#alternativeAction(ConfigurationExchange) 
   * @param parent the parent node in the config tree
   * @return the parent for child actions
   */
  public Iterable<SNode> applyTo(SNode parent) {
    return Collections.emptyList();
  }

  /**
   * Allow sorting of children, after their changes have been applied.
   */
  public void sortChildren() {
  }

  public void setChildren(List<Action> childen) {
    this.children = childen;
  }

  public List<Action> getChildren() {
    return this.children;
  }
  @Override
  public String toString() {
    return "Empty Action";
  }
}
