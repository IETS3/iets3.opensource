package org.iets3.variability.configuration.base.plugin;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.iets3.variability.configuration.base.behavior.AbstractFeatureConfiguration__BehaviorDescriptor;
import org.iets3.variability.configuration.base.behavior.FeatureAttributeAssignment__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class FeatureAttributeAssignmentUtil {

  public static boolean isUnassignedAttribute(SNode attrAssignment) {
    boolean areAncestorsSelected = ListSequence.fromList(SNodeOperations.getNodeAncestors(attrAssignment, CONCEPTS.AbstractFeatureConfiguration$3P, true)).all((it) -> (boolean) AbstractFeatureConfiguration__BehaviorDescriptor.isSelected_id79zES$XKwaU.invoke(it));

    boolean attributeNotAssigned = ((attrAssignment == null) || (FeatureAttributeAssignment__BehaviorDescriptor.getValue_id5Bs7u20FcLE.invoke(attrAssignment) == null) || SNodeOperations.getConcept(FeatureAttributeAssignment__BehaviorDescriptor.getValue_id5Bs7u20FcLE.invoke(attrAssignment)).isAbstract() || ListSequence.fromList(SNodeOperations.getNodeDescendants(FeatureAttributeAssignment__BehaviorDescriptor.getValue_id5Bs7u20FcLE.invoke(attrAssignment), CONCEPTS.Expression$D_, true, new SAbstractConcept[]{})).any((it) -> SNodeOperations.getConcept(it).equals(SNodeOperations.getConcept(SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a047L, "org.iets3.core.expr.base.structure.Expression"))))));

    if (attributeNotAssigned && areAncestorsSelected) {
      return true;
    }
    return false;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractFeatureConfiguration$3P = MetaAdapterFactory.getConcept(0x71226ee2bbc445d2L, 0xa41d20b97237156cL, 0x302aa0c2ddab8940L, "org.iets3.variability.configuration.base.structure.AbstractFeatureConfiguration");
    /*package*/ static final SConcept Expression$D_ = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a047L, "org.iets3.core.expr.base.structure.Expression");
  }
}
