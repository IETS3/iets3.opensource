package org.iets3.variability.configuration.base.plugin;

/*Generated by MPS */

import org.iets3.core.base.behavior.IResult;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.concurrent.CompletableFuture;
import java.util.List;
import org.iets3.variability.base.behavior.MpsActions;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.smodel.structure.ExtensionPoint;

/**
 * Abstraction for Solver functionality which checks FMC-constraints and determines values
 * of a FMC
 */
public interface IConfigurationSolver {
  /**
   * Runs Solver in synchronous mode
   * 
   * @param fmc  
   * @return  
   */
  IResult runSolver(SNode fmc);

  /**
   * Runs Solver in asynchronous mode
   * 
   * @param fmc  
   * @param mpsAction provide as non UI-Thread needs to write to model
   * @return  
   */
  CompletableFuture<List<IResult>> solverResultsAsync(SNode fmc, MpsActions mpsAction);

  /**
   * The higher the priority the higher the probability that the implementation is chosen
   * 
   * @return  
   */
  default int priority() {
    return 1000;
  }

  static IConfigurationSolver instance() {
    return Sequence.fromIterable(new ExtensionPoint<IConfigurationSolver>("org.iets3.variability.configuration.base.configurationSolverExtPoint").getObjects()).sort((it) -> it.priority(), false).first();
  }
}
