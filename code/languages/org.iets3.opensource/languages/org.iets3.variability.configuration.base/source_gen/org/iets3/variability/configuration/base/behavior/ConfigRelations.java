package org.iets3.variability.configuration.base.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.Objects;
import jetbrains.mps.internal.collections.runtime.Sequence;

/**
 * This class should contain the logic for analysing relations between configurations.
 * 
 * The general approach is currently to compute these relations from the relations in the model.
 * We do not compare configurations based on the features' selection states. So if two configurations
 * for the same feature model have exactly the same selection states for each of their features,
 * the configurations are not equal (although they will behave equally for all intents and purposes).
 * 
 * The same approach is done for all other configuration-relations.
 * 
 * We might consider changing this behavior in future.
 */
public class ConfigRelations {
  /**
   * Checks if "specific" <= "generic".
   * 
   * <= is a partial order, where "a < b" iff a is more specific than b.
   * ("more specific" means that a extends b transitively).
   */
  public static boolean isMoreSpecificOrEqual(SNode specific, SNode generic) {
    if (Objects.equals(specific, generic)) {
      return true;
    }

    Iterable<SNode> extended = FeatureModelConfigurationInheritanceUtil.extendedFeatureModelConfigs(specific);

    return Sequence.fromIterable(extended).contains(generic);
  }
}
