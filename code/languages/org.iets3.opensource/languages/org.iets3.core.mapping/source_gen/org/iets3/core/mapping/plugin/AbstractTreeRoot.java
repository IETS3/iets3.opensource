package org.iets3.core.mapping.plugin;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public abstract class AbstractTreeRoot extends AbstractTreeNode {
  protected abstract void initChildren();

  public List<TreeNode> getLeafs() {
    return collectLeafs();
  }
  public List<TreeNode> getAllNodes() {
    return collectNodes();
  }

  private List<TreeNode> collectNodes() {
    final List<TreeNode> leafs = ListSequence.fromList(new ArrayList<TreeNode>());
    ListSequence.fromList(this.getChildren()).visitAll((it) -> {
      TreeNode node = as_1mbsox_a0a0a0a0b0f(it, TreeNode.class);
      ListSequence.fromList(leafs).addSequence(ListSequence.fromList(node.collectNodes()));
    });

    return leafs;
  }

  private List<TreeNode> collectLeafs() {
    final List<TreeNode> leafs = ListSequence.fromList(new ArrayList<TreeNode>());
    ListSequence.fromList(this.getChildren()).visitAll((it) -> {
      TreeNode node = as_1mbsox_a0a0a0a0b0h(it, TreeNode.class);
      ListSequence.fromList(leafs).addSequence(ListSequence.fromList(node.collectLeafs()));
    });

    return leafs;
  }

  protected void createPaths() {
    ListSequence.fromList(this.getChildren()).visitAll((it) -> {
      TreeNode node = as_1mbsox_a0a0a0a0a0j(it, TreeNode.class);
      // set path of root
      node.setPath(SPropertyOperations.getString(node.getInstace(), PROPS.name$MnvL));
      node.calculatePath();
    });
  }

  @Override
  public abstract SNode getValue();
  private static <T> T as_1mbsox_a0a0a0a0b0f(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_1mbsox_a0a0a0a0b0h(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_1mbsox_a0a0a0a0a0j(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}
