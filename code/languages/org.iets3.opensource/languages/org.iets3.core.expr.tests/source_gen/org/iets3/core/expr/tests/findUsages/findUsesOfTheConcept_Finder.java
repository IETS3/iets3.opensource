package org.iets3.core.expr.tests.findUsages;

/*Generated by MPS */

import jetbrains.mps.ide.findusages.findalgorithm.finders.GeneratedFinder;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.module.SearchScope;
import jetbrains.mps.ide.findusages.model.scopes.ModelsScope;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.ide.findusages.findalgorithm.finders.IFinder;
import org.jetbrains.mps.openapi.util.ProgressMonitor;
import org.iets3.core.expr.tests.behavior.AbstractCoverageQuery__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class findUsesOfTheConcept_Finder extends GeneratedFinder {
  public findUsesOfTheConcept_Finder() {
  }
  public boolean isVisible(SNode node, SearchScope scope) {
    return true;
  }
  @Override
  public boolean isVisible(SNode node) {
    return isVisible(node, new ModelsScope(node.getModel()));
  }
  @Override
  public boolean isUsedByDefault(SNode node) {
    return true;
  }
  @Override
  public String getDescription() {
    return "Concept Instances in Tests";
  }
  @Override
  public String getLongDescription() {
    return "Concept Instances in Tests";
  }
  @Override
  public SAbstractConcept getSConcept() {
    return CONCEPTS.InterpreterCoverageAssResult$oe;
  }
  @Override
  public boolean isApplicable(SNode node) {
    return true;
  }

  @Override
  protected void doFind0(@NotNull SNode node, SearchScope scope, final IFinder.FindCallback callback, ProgressMonitor monitor) {
    monitor.start(getDescription(), 0);
    try {
      Iterable<SNode> suites = AbstractCoverageQuery__BehaviorDescriptor.findAllTestsSuites_id18$bUx5qaUV.invoke(SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.getNodeAncestor(node, CONCEPTS.Assessment$UY, false, false), LINKS.query$gGFe), CONCEPTS.InterpreterCoverageAssQuery$Y2));
      for (SNode s : Sequence.fromIterable(suites)) {
        ListSequence.fromList(SNodeOperations.getNodeDescendants(s, SNodeOperations.asSConcept(SNodeOperations.asSConcept(SLinkOperations.getTarget(node, LINKS.concept$EaN1))), false, new SAbstractConcept[]{})).visitAll((it) -> callback.onUsageFound(createSingleResult(it)));
      }
    } finally {
      monitor.done();
    }
  }

  @Override
  public String getNodeCategory(SNode node) {
    return "Instances in Tests";
  }

  @Nullable
  @Override
  public SNodeReference getDeclarationNode() {
    return buildNodePointer(FindUsagesDescriptor.DECLARING_MODEL, "1307222191609765362");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept InterpreterCoverageAssResult$oe = MetaAdapterFactory.getConcept(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x3969aca372b2dd91L, "org.iets3.core.expr.tests.structure.InterpreterCoverageAssResult");
    /*package*/ static final SConcept Assessment$UY = MetaAdapterFactory.getConcept(0xd4280a54f6df4383L, 0xaa41d1b2bffa7eb1L, 0xc022423d5828abcL, "com.mbeddr.core.base.structure.Assessment");
    /*package*/ static final SConcept InterpreterCoverageAssQuery$Y2 = MetaAdapterFactory.getConcept(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x3969aca372b2ccf2L, "org.iets3.core.expr.tests.structure.InterpreterCoverageAssQuery");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink query$gGFe = MetaAdapterFactory.getContainmentLink(0xd4280a54f6df4383L, 0xaa41d1b2bffa7eb1L, 0xc022423d5828abcL, 0xc022423d582911dL, "query");
    /*package*/ static final SReferenceLink concept$EaN1 = MetaAdapterFactory.getReferenceLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x3969aca372b2dd91L, 0x3969aca372b2df16L, "concept");
  }
}
