package org.iets3.core.expr.tests.plugin;

/*Generated by MPS */

import java.util.List;
import org.iets3.core.expr.base.plugin.Mutator;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import org.iets3.core.expr.base.plugin.MutatorFactory;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.smodel.structure.ExtensionPoint;

public class MutationRegistry {

  private static List<Mutator> mutators;

  public static List<Mutator> getMutators() {
    if (mutators == null) {
      mutators = ListSequence.fromList(new ArrayList<Mutator>());
      for (MutatorFactory f : Sequence.fromIterable(new ExtensionPoint<MutatorFactory>("org.iets3.core.expr.base.mutatorContributions").getObjects())) {
        for (Mutator m : ListSequence.fromList(f.mutators())) {
          ListSequence.fromList(mutators).addElement(m);
          if (m.isReversible()) {
            ListSequence.fromList(mutators).addElement(m.reversed());
          }
        }
      }
    }
    return mutators;
  }


}
