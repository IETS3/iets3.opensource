package org.iets3.core.expr.tests.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractInferenceRule_Runtime;
import jetbrains.mps.lang.typesystem.runtime.InferenceRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.List;
import org.iets3.core.expr.tests.behavior.TestSubjectAdapter__BehaviorDescriptor;
import org.iets3.core.expr.tests.behavior.AbstractVectorCollection__BehaviorDescriptor;
import jetbrains.mps.baseLanguage.tuples.runtime.Tuples;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.typesystem.inference.EquationInfo;
import jetbrains.mps.errors.messageTargets.MessageTarget;
import jetbrains.mps.errors.messageTargets.NodeMessageTarget;
import jetbrains.mps.errors.IErrorReporter;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class typeof_InputVector_InferenceRule extends AbstractInferenceRule_Runtime implements InferenceRule_Runtime {
  public typeof_InputVector_InferenceRule() {
  }
  public void applyRule(final SNode iv, final TypeCheckingContext typeCheckingContext, IsApplicableStatus status) {
    SNode col = SNodeOperations.cast(SNodeOperations.getParent(iv), CONCEPTS.AbstractVectorCollection$cN);
    List<SNode> args = TestSubjectAdapter__BehaviorDescriptor.arguments_id1bwJEEeSLhl.invoke(AbstractVectorCollection__BehaviorDescriptor.subject_id1bwJEEeTss8.invoke(col));
    List<Tuples._2<SNode, String>> outs = TestSubjectAdapter__BehaviorDescriptor.outputs_id1bwJEEg42nb.invoke(AbstractVectorCollection__BehaviorDescriptor.subject_id1bwJEEeTss8.invoke(col));
    for (SNode v : ListSequence.fromList(SLinkOperations.getChildren(iv, LINKS.values$8V1O))) {
      {
        SNode _nodeToCheck_1029348928467 = SLinkOperations.getTarget(v, LINKS.value$xPWu);
        EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727219232292", 0, null);
        typeCheckingContext.createLessThanInequality((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727219231285", true), (SNode) typeCheckingContext.typeOf(SLinkOperations.getTarget(v, LINKS.argument$xPus), "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727219232308", true), false, true, _info_12389875345);
      }
    }
    if (ListSequence.fromList(SLinkOperations.getChildren(iv, LINKS.values$8V1O)).count() < ListSequence.fromList(args).count()) {
      {
        final MessageTarget errorTarget = new NodeMessageTarget();
        IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(iv, LINKS.outcome$jAoe), "missing input", "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727223675233", null, errorTarget);
      }
    }
    if (ListSequence.fromList(outs).isNotEmpty()) {
      for (SNode r : ListSequence.fromList(SLinkOperations.getChildren(iv, LINKS.results$MVx9))) {
        {
          SNode _nodeToCheck_1029348928467 = SLinkOperations.getTarget(r, LINKS.value$VRuh);
          EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727242650828", 0, null);
          typeCheckingContext.createLessThanInequality((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727242650835", true), (SNode) typeCheckingContext.typeOf(SLinkOperations.getTarget(r, LINKS.out$YnSk), "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727242650830", true), false, true, _info_12389875345);
        }
      }
      if ((ListSequence.fromList(SLinkOperations.getChildren(iv, LINKS.results$MVx9)).count() < ListSequence.fromList(outs).count()) && SNodeOperations.isInstanceOf(SLinkOperations.getTarget(iv, LINKS.outcome$jAoe), CONCEPTS.ValidOutcome$j9)) {
        {
          final MessageTarget errorTarget = new NodeMessageTarget();
          IErrorReporter _reporter_2309309498 = typeCheckingContext.reportTypeError(SLinkOperations.getTarget(iv, LINKS.outcome$jAoe), "missing output", "r:8b1d85a0-933d-4f71-99e8-5435698868f9(org.iets3.core.expr.tests.typesystem)", "1360296727242656723", null, errorTarget);
        }
      }
    }
  }
  public SAbstractConcept getApplicableConcept() {
    return CONCEPTS.TestVector$1b;
  }
  public IsApplicableStatus isApplicableAndPattern(SNode argument) {
    return new IsApplicableStatus(argument.getConcept().isSubConceptOf(getApplicableConcept()), null);
  }
  public boolean overrides() {
    return false;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractVectorCollection$cN = MetaAdapterFactory.getConcept(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8ee31422L, "org.iets3.core.expr.tests.structure.AbstractVectorCollection");
    /*package*/ static final SConcept ValidOutcome$j9 = MetaAdapterFactory.getConcept(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8fc47618L, "org.iets3.core.expr.tests.structure.ValidOutcome");
    /*package*/ static final SConcept TestVector$1b = MetaAdapterFactory.getConcept(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8ee3141fL, "org.iets3.core.expr.tests.structure.TestVector");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink value$xPWu = MetaAdapterFactory.getContainmentLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8f0adb15L, 0x12e0beaa8f0adb36L, "value");
    /*package*/ static final SReferenceLink argument$xPus = MetaAdapterFactory.getReferenceLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8f0adb15L, 0x12e0beaa8f0adb34L, "argument");
    /*package*/ static final SContainmentLink values$8V1O = MetaAdapterFactory.getContainmentLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8ee3141fL, 0x12e0beaa8ee31420L, "values");
    /*package*/ static final SContainmentLink outcome$jAoe = MetaAdapterFactory.getContainmentLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8ee3141fL, 0x12e0beaa8fc47632L, "outcome");
    /*package*/ static final SContainmentLink value$VRuh = MetaAdapterFactory.getContainmentLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa9048c59dL, 0x12e0beaa9048c5e8L, "value");
    /*package*/ static final SReferenceLink out$YnSk = MetaAdapterFactory.getReferenceLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa9048c59dL, 0x12e0beaa9064f4c2L, "out");
    /*package*/ static final SContainmentLink results$MVx9 = MetaAdapterFactory.getContainmentLink(0xd441fba0f46b43cdL, 0xb723dad7b65da615L, 0x12e0beaa8ee3141fL, 0x12e0beaa904ac9aeL, "results");
  }
}
