package org.iets3.core.expr.util.intentions;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import java.util.StringTokenizer;
import java.util.List;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.iets3.core.expr.simpleTypes.behavior.NumberLiteral__BehaviorDescriptor;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SProperty;

public class MultiDectabPasteHelper {


  public static void pasteIntoRow(SNode row, String s, int startAt) {
    ListSequence.fromList(SLinkOperations.getChildren(row, LINKS.contents$qmm1)).clear();
    StringTokenizer st = new StringTokenizer(s.trim(), "\t");
    int p = startAt;
    while (st.hasMoreTokens()) {
      String t = st.nextToken();
      List<SNode> colDefs = SLinkOperations.getChildren(SNodeOperations.cast(SNodeOperations.getParent(row), CONCEPTS.MultiDecTab$Cw), LINKS.colDefs$80en);
      if (p >= ListSequence.fromList(colDefs).count()) {
        return;
      }
      SNode col = ListSequence.fromList(colDefs).getElement(p);
      if (col != null) {
        SNode n = makeNode(t);
        ListSequence.fromList(SLinkOperations.getChildren(row, LINKS.contents$qmm1)).addElement(createContent_pw5al6_a0a1a4a3a2(col, n));
      }
      p++;
    }
  }

  public static void pasteIntoTable(SNode table, String s, int startAt) {
    ListSequence.fromList(SLinkOperations.getChildren(table, LINKS.rows$sdUx)).clear();
    StringTokenizer st;
    if (s.contains("\n")) {
      st = new StringTokenizer(s.trim(), "\n");
    } else if (s.contains("\r")) {
      st = new StringTokenizer(s.trim(), "\r");
    } else {
      return;
    }
    while (st.hasMoreTokens()) {
      String t = st.nextToken();
      SNode r = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df8bcffL, "org.iets3.core.expr.util.structure.DataRow"));
      ListSequence.fromList(SLinkOperations.getChildren(table, LINKS.rows$sdUx)).addElement(r);
      pasteIntoRow(r, t, startAt);
    }
  }

  private static SNode makeNode(String s) {
    String l = s.trim().toLowerCase();
    if (l.equals("true") || l.equals("ja")) {
      return createTrueLiteral_pw5al6_a0a1a6();
    }
    if (l.equals("false") || l.equals("nein")) {
      return createFalseLiteral_pw5al6_a0a2a6();
    }
    if (l.matches("\\d*")) {
      return NumberLiteral__BehaviorDescriptor.set_id2oUyrt$Tg3c.invoke(SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d0e6daL, "org.iets3.core.expr.simpleTypes.structure.NumberLiteral")), s);
    }
    if (l.matches("\\d*\\.\\d*")) {
      return NumberLiteral__BehaviorDescriptor.set_id2oUyrt$Tg3c.invoke(SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d0e6daL, "org.iets3.core.expr.simpleTypes.structure.NumberLiteral")), s);
    }
    return createStringLiteral_pw5al6_a5a6(s);
  }


  private static SNode createContent_pw5al6_a0a1a4a3a2(SNode p0, SNode p1) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.Content$au);
    n0.setReferenceTarget(LINKS.col$28hQ, p0);
    {
      SNodeBuilder n1 = n0.forChild(LINKS.exprs$KQyr).initNode(p1, CONCEPTS.Expression$D_, false);
    }
    return n0.getResult();
  }
  private static SNode createTrueLiteral_pw5al6_a0a1a6() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.TrueLiteral$_K);
    return n0.getResult();
  }
  private static SNode createFalseLiteral_pw5al6_a0a2a6() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.FalseLiteral$ik);
    return n0.getResult();
  }
  private static SNode createStringLiteral_pw5al6_a5a6(String p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.StringLiteral$By);
    n0.setProperty(PROPS.value$zwlK, p0);
    return n0.getResult();
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink contents$qmm1 = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df8bcffL, 0x23df2a74df944daL, "contents");
    /*package*/ static final SContainmentLink colDefs$80en = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7adee935251479e0L, 0x7adee93525147a20L, "colDefs");
    /*package*/ static final SContainmentLink rows$sdUx = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7adee935251479e0L, 0x7adee93525147c24L, "rows");
    /*package*/ static final SReferenceLink col$28hQ = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df94468L, 0x23df2a74df945baL, "col");
    /*package*/ static final SContainmentLink exprs$KQyr = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df94468L, 0x23df2a74df944d8L, "exprs");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept MultiDecTab$Cw = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df65f5cL, "org.iets3.core.expr.util.structure.MultiDecTab");
    /*package*/ static final SConcept Content$au = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x23df2a74df94468L, "org.iets3.core.expr.util.structure.Content");
    /*package*/ static final SConcept Expression$D_ = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a047L, "org.iets3.core.expr.base.structure.Expression");
    /*package*/ static final SConcept TrueLiteral$_K = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x670d5e92f854cb59L, "org.iets3.core.expr.simpleTypes.structure.TrueLiteral");
    /*package*/ static final SConcept FalseLiteral$ik = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x670d5e92f854cb76L, "org.iets3.core.expr.simpleTypes.structure.FalseLiteral");
    /*package*/ static final SConcept StringLiteral$By = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d3edc8L, "org.iets3.core.expr.simpleTypes.structure.StringLiteral");
  }

  private static final class PROPS {
    /*package*/ static final SProperty value$zwlK = MetaAdapterFactory.getProperty(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d3edc8L, 0x46ff3b3d86d3edcbL, "value");
  }
}
