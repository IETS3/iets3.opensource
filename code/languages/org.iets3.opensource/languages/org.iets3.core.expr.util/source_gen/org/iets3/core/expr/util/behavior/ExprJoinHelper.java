package org.iets3.core.expr.util.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public class ExprJoinHelper {

  public static SNode makeOrExpression(Iterable<SNode> exprs) {
    List<SNode> el = Sequence.fromIterable(exprs).where((it) -> !(SNodeOperations.isInstanceOf(it, CONCEPTS.EmptyExpression$AJ))).toList();
    if (ListSequence.fromList(el).isEmpty()) {
      return createTrueLiteral_39p6ly_a0a1a1();
    }
    if (ListSequence.fromList(el).count() == 1) {
      return SNodeOperations.copyNode(ListSequence.fromList(el).first());
    }
    SNode or = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86cbdcbbL, "org.iets3.core.expr.base.structure.LogicalOrExpression"));
    SNode outerOr = or;
    SLinkOperations.setTarget(or, LINKS.left$zxUa, SNodeOperations.copyNode(ListSequence.fromList(el).first()));
    for (SNode e : ListSequence.fromList(el).tailListSequence(1)) {
      if (e == ListSequence.fromList(el).last()) {
        SLinkOperations.setTarget(or, LINKS.right$zBjx, e);
      } else {
        SNode nestedOr = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86cbdcbbL, "org.iets3.core.expr.base.structure.LogicalOrExpression"));
        SLinkOperations.setTarget(or, LINKS.right$zBjx, nestedOr);
        SLinkOperations.setTarget(nestedOr, LINKS.left$zxUa, SNodeOperations.copyNode(e));
        or = nestedOr;
      }
    }
    return outerOr;
  }

  public static SNode makeAndExpression(Iterable<SNode> exprs) {
    List<SNode> el = Sequence.fromIterable(exprs).where((it) -> !(SNodeOperations.isInstanceOf(it, CONCEPTS.EmptyExpression$AJ))).toList();
    if (ListSequence.fromList(el).isEmpty()) {
      return createTrueLiteral_39p6ly_a0a1a3();
    }
    if (ListSequence.fromList(el).count() == 1) {
      return SNodeOperations.copyNode(ListSequence.fromList(el).first());
    }
    SNode and = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86cbdd39L, "org.iets3.core.expr.base.structure.LogicalAndExpression"));
    SNode outerAnd = and;
    SLinkOperations.setTarget(and, LINKS.left$zxUa, SNodeOperations.copyNode(ListSequence.fromList(el).first()));
    for (SNode e : ListSequence.fromList(el).tailListSequence(1)) {
      if (e == ListSequence.fromList(el).last()) {
        SLinkOperations.setTarget(and, LINKS.right$zBjx, e);
      } else {
        SNode nestedAnd = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86cbdd39L, "org.iets3.core.expr.base.structure.LogicalAndExpression"));
        SLinkOperations.setTarget(and, LINKS.right$zBjx, nestedAnd);
        SLinkOperations.setTarget(nestedAnd, LINKS.left$zxUa, SNodeOperations.copyNode(e));
        and = nestedAnd;
      }
    }
    return outerAnd;
  }

  private static SNode createTrueLiteral_39p6ly_a0a1a1() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.TrueLiteral$_K);
    return n0.getResult();
  }
  private static SNode createTrueLiteral_39p6ly_a0a1a3() {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.TrueLiteral$_K);
    return n0.getResult();
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept EmptyExpression$AJ = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0xfb1fafe7bb61a8L, "org.iets3.core.expr.util.structure.EmptyExpression");
    /*package*/ static final SConcept TrueLiteral$_K = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x670d5e92f854cb59L, "org.iets3.core.expr.simpleTypes.structure.TrueLiteral");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink left$zxUa = MetaAdapterFactory.getContainmentLink(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86c99c15L, 0x46ff3b3d86c99c16L, "left");
    /*package*/ static final SContainmentLink right$zBjx = MetaAdapterFactory.getContainmentLink(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x46ff3b3d86c99c15L, 0x46ff3b3d86c99c18L, "right");
  }
}
