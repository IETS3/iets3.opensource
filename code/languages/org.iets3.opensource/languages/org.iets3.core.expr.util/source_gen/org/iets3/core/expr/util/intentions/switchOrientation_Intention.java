package org.iets3.core.expr.util.intentions;

/*Generated by MPS */

import jetbrains.mps.intentions.AbstractIntentionDescriptor;
import jetbrains.mps.openapi.intentions.IntentionFactory;
import java.util.Collection;
import jetbrains.mps.openapi.intentions.IntentionExecutable;
import jetbrains.mps.openapi.intentions.Kind;
import jetbrains.mps.smodel.SNodePointer;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.EditorContext;
import java.util.Collections;
import jetbrains.mps.intentions.AbstractIntentionExecutable;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.openapi.intentions.IntentionDescriptor;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SConcept;

public final class switchOrientation_Intention extends AbstractIntentionDescriptor implements IntentionFactory {
  private Collection<IntentionExecutable> myCachedExecutable;

  public switchOrientation_Intention() {
    super(Kind.NORMAL, true, new SNodePointer("r:ecf4180a-6e34-47e0-90d1-b073b95f6f24(org.iets3.core.expr.util.intentions)", "9010066787211693639"));
  }

  @Override
  public String getPresentation() {
    return "switchOrientation";
  }

  @Override
  public boolean isSurroundWith() {
    return false;
  }

  public Collection<IntentionExecutable> instances(final SNode node, final EditorContext context) {
    if (myCachedExecutable == null) {
      myCachedExecutable = Collections.<IntentionExecutable>singletonList(new IntentionImplementation());
    }
    return myCachedExecutable;
  }
  /*package*/ final class IntentionImplementation extends AbstractIntentionExecutable {
    public IntentionImplementation() {
    }

    @Override
    public String getDescription(final SNode node, final EditorContext editorContext) {
      return "TABLE: " + ("Switch Orientation");
    }

    @Override
    public void execute(final SNode node, final EditorContext editorContext) {
      final SNode t = SConceptOperations.createNewNode(MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, "org.iets3.core.expr.util.structure.DecTab"));
      ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.colHeaders$3s_N)).clear();
      ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.rowHeaders$3rSK)).clear();

      ListSequence.fromList(SLinkOperations.getChildren(node, LINKS.colHeaders$3s_N)).visitAll((it) -> {
        List<SNode> exprs = new ArrayList<SNode>();
        for (SNode expr : ListSequence.fromList(SLinkOperations.getChildren(it, LINKS.expressions$2RXU))) {
          ListSequence.fromList(exprs).addElement(SNodeOperations.copyNode(expr));
        }
        ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.rowHeaders$3rSK)).addElement(createDecTabRowHeader_p4962m_a0a2a0a0e0a(exprs));
      });
      ListSequence.fromList(SLinkOperations.getChildren(node, LINKS.rowHeaders$3rSK)).visitAll((it) -> {
        List<SNode> exprs = new ArrayList<SNode>();
        for (SNode expr : ListSequence.fromList(SLinkOperations.getChildren(it, LINKS.expressions$2RXU))) {
          ListSequence.fromList(exprs).addElement(SNodeOperations.copyNode(expr));
        }

        ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.colHeaders$3s_N)).addElement(createDecTabColHeader_p4962m_a0a3a0a0f0a(exprs));
      });
      ListSequence.fromList(SLinkOperations.getChildren(node, LINKS.contents$3yGd)).visitAll((it) -> {
        List<SNode> exprs = new ArrayList<SNode>();
        for (SNode expr : ListSequence.fromList(SLinkOperations.getChildren(it, LINKS.expressions$2RXU))) {
          ListSequence.fromList(exprs).addElement(SNodeOperations.copyNode(expr));
        }

        ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.contents$3yGd)).addElement(createDecTabContent_p4962m_a0a3a0a0g0a(exprs, ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.colHeaders$3s_N)).getElement(SNodeOperations.getIndexInParent(SLinkOperations.getTarget(it, LINKS.row$3lio))), ListSequence.fromList(SLinkOperations.getChildren(t, LINKS.rowHeaders$3rSK)).getElement(SNodeOperations.getIndexInParent(SLinkOperations.getTarget(it, LINKS.col$3qUK)))));
      });
      SLinkOperations.setTarget(t, LINKS.default$x3kk, SNodeOperations.copyNode(SLinkOperations.getTarget(node, LINKS.default$x3kk)));
      if ((SLinkOperations.getTarget(node, LINKS.predefY$bypa) != null)) {
        SLinkOperations.setTarget(t, LINKS.predefX$16Jb, SNodeOperations.copyNode(SLinkOperations.getTarget(node, LINKS.predefY$bypa)));
      }
      if ((SLinkOperations.getTarget(node, LINKS.predefX$16Jb) != null)) {
        SLinkOperations.setTarget(t, LINKS.predefY$bypa, SNodeOperations.copyNode(SLinkOperations.getTarget(node, LINKS.predefX$16Jb)));
      }
      SNodeOperations.replaceWithAnother(node, t);
    }

    @Override
    public boolean isApplicable(final SNode node, final EditorContext editorContext) {
      return true;
    }



    @Override
    public IntentionDescriptor getDescriptor() {
      return switchOrientation_Intention.this;
    }

  }
  private static SNode createDecTabRowHeader_p4962m_a0a2a0a0e0a(Iterable<? extends SNode> p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.DecTabRowHeader$id);
    n0.forChild(LINKS.expressions$2RXU).initNodeList(p0, CONCEPTS.Expression$D_);
    return n0.getResult();
  }
  private static SNode createDecTabColHeader_p4962m_a0a3a0a0f0a(Iterable<? extends SNode> p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.DecTabColHeader$sR);
    n0.forChild(LINKS.expressions$2RXU).initNodeList(p0, CONCEPTS.Expression$D_);
    return n0.getResult();
  }
  private static SNode createDecTabContent_p4962m_a0a3a0a0g0a(Iterable<? extends SNode> p0, SNode p1, SNode p2) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.DecTabContent$uN);
    n0.forChild(LINKS.expressions$2RXU).initNodeList(p0, CONCEPTS.Expression$D_);
    n0.setReferenceTarget(LINKS.col$3qUK, p1);
    n0.setReferenceTarget(LINKS.row$3lio, p2);
    return n0.getResult();
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink colHeaders$3s_N = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0x3a7ea77800c04344L, "colHeaders");
    /*package*/ static final SContainmentLink rowHeaders$3rSK = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0x3a7ea77800c04341L, "rowHeaders");
    /*package*/ static final SContainmentLink expressions$2RXU = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c0430fL, 0x3a7ea77800c04310L, "expressions");
    /*package*/ static final SContainmentLink contents$3yGd = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0x3a7ea77800c04349L, "contents");
    /*package*/ static final SReferenceLink row$3lio = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c0430eL, 0x3a7ea77800c04339L, "row");
    /*package*/ static final SReferenceLink col$3qUK = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c0430eL, 0x3a7ea77800c0433cL, "col");
    /*package*/ static final SContainmentLink default$x3kk = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0x3a7ea77800cef3aeL, "default");
    /*package*/ static final SContainmentLink predefX$16Jb = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0xcde8c60cefc3c13L, "predefX");
    /*package*/ static final SContainmentLink predefY$bypa = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04308L, 0xcde8c60cefe1fe6L, "predefY");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept DecTabRowHeader$id = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c04309L, "org.iets3.core.expr.util.structure.DecTabRowHeader");
    /*package*/ static final SConcept Expression$D_ = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a047L, "org.iets3.core.expr.base.structure.Expression");
    /*package*/ static final SConcept DecTabColHeader$sR = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c0430aL, "org.iets3.core.expr.util.structure.DecTabColHeader");
    /*package*/ static final SConcept DecTabContent$uN = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x3a7ea77800c0430eL, "org.iets3.core.expr.util.structure.DecTabContent");
  }
}
