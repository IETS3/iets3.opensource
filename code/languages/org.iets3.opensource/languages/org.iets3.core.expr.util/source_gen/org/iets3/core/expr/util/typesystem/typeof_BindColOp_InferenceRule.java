package org.iets3.core.expr.util.typesystem;

/*Generated by MPS */

import jetbrains.mps.lang.typesystem.runtime.AbstractInferenceRule_Runtime;
import jetbrains.mps.lang.typesystem.runtime.InferenceRule_Runtime;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.typesystem.inference.TypeCheckingContext;
import jetbrains.mps.lang.typesystem.runtime.IsApplicableStatus;
import org.iets3.core.expr.base.behavior.IDotTarget__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.typesystem.inference.EquationInfo;
import org.iets3.core.expr.util.behavior.IColumnBindingType__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class typeof_BindColOp_InferenceRule extends AbstractInferenceRule_Runtime implements InferenceRule_Runtime {
  public typeof_BindColOp_InferenceRule() {
  }
  public void applyRule(final SNode bindColOp, final TypeCheckingContext typeCheckingContext, IsApplicableStatus status) {
    {
      final SNode dotType = typeCheckingContext.typeOf(IDotTarget__BehaviorDescriptor.contextExpression_id6zmBjqUivyF.invoke(bindColOp), "r:9c5c2614-fd32-4054-b6ea-f1ceb6bdd369(org.iets3.core.expr.util.typesystem)", "8840800177409750838", true);
      typeCheckingContext.whenConcrete(dotType, () -> {
        {
          final SNode ict = typeCheckingContext.getExpandedNode(dotType);
          if (SNodeOperations.isInstanceOf(ict, CONCEPTS.IColumnBindingType$k4)) {
            Iterable<SNode> boundCols = Sequence.fromIterable(SLinkOperations.collect(SLinkOperations.getChildren(bindColOp, LINKS.values$c4Iq), LINKS.col$DRhq)).select((it) -> createBoundColRef_98h8jq_a0a0a0a0a0a1a0b0a0b(it));
            {
              SNode _nodeToCheck_1029348928467 = bindColOp;
              EquationInfo _info_12389875345 = new EquationInfo(_nodeToCheck_1029348928467, null, "r:9c5c2614-fd32-4054-b6ea-f1ceb6bdd369(org.iets3.core.expr.util.typesystem)", "8840800177408407135", 0, null);
              typeCheckingContext.createEquation((SNode) typeCheckingContext.typeOf(_nodeToCheck_1029348928467, "r:9c5c2614-fd32-4054-b6ea-f1ceb6bdd369(org.iets3.core.expr.util.typesystem)", "8840800177408402259", true), (SNode) createPartialDecTableType_98h8jq_a1a0c0b0a0b0a1a0a1(IColumnBindingType__BehaviorDescriptor.getTable_id7EKPeISCSMm.invoke(ict), boundCols), _info_12389875345);
            }
          }
        }
      }, "r:9c5c2614-fd32-4054-b6ea-f1ceb6bdd369(org.iets3.core.expr.util.typesystem)", "8840800177408407750", false, false);
    }
  }
  public SAbstractConcept getApplicableConcept() {
    return CONCEPTS.BindColOp$Hf;
  }
  public IsApplicableStatus isApplicableAndPattern(SNode argument) {
    return new IsApplicableStatus(argument.getConcept().isSubConceptOf(getApplicableConcept()), null);
  }
  public boolean overrides() {
    return false;
  }
  private static SNode createBoundColRef_98h8jq_a0a0a0a0a0a1a0b0a0b(SNode p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.BoundColRef$yH);
    n0.setReferenceTarget(LINKS.col$vTFq, p0);
    return n0.getResult();
  }
  private static SNode createPartialDecTableType_98h8jq_a1a0c0b0a0b0a1a0a1(SNode p0, Iterable<? extends SNode> p1) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.PartialDecTableType$kb);
    n0.setReferenceTarget(LINKS.table$vRNL, p0);
    n0.forChild(LINKS.boundCols$yn_q).initNodeList(p1, CONCEPTS.BoundColRef$yH);
    return n0.getResult();
  }

  private static final class CONCEPTS {
    /*package*/ static final SInterfaceConcept IColumnBindingType$k4 = MetaAdapterFactory.getInterfaceConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb88f70b9L, "org.iets3.core.expr.util.structure.IColumnBindingType");
    /*package*/ static final SConcept BindColOp$Hf = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb880ef94L, "org.iets3.core.expr.util.structure.BindColOp");
    /*package*/ static final SConcept BoundColRef$yH = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb8a24c92L, "org.iets3.core.expr.util.structure.BoundColRef");
    /*package*/ static final SConcept PartialDecTableType$kb = MetaAdapterFactory.getConcept(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb8a24c89L, "org.iets3.core.expr.util.structure.PartialDecTableType");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink values$c4Iq = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb880ef94L, 0x7ab0d4ebb8812346L, "values");
    /*package*/ static final SReferenceLink col$DRhq = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7adee935255bd9f6L, 0x7adee935255bd9f7L, "col");
    /*package*/ static final SReferenceLink col$vTFq = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb8a24c92L, 0x7ab0d4ebb8a24c93L, "col");
    /*package*/ static final SReferenceLink table$vRNL = MetaAdapterFactory.getReferenceLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb8a24c89L, 0x7ab0d4ebb8a24c8cL, "table");
    /*package*/ static final SContainmentLink boundCols$yn_q = MetaAdapterFactory.getContainmentLink(0x8bb1251eeae547abL, 0x984333adfae8edaaL, 0x7ab0d4ebb8a24c89L, 0x7ab0d4ebb8a24c95L, "boundCols");
  }
}
