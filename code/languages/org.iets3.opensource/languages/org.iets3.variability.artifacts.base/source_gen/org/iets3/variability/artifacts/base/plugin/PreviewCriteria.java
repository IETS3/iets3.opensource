package org.iets3.variability.artifacts.base.plugin;

/*Generated by MPS */

import java.util.Collections;
import org.iets3.variability.artifacts.base.behavior.PresenceConditionValue;
import com.google.common.collect.Sets;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import java.util.Set;
import org.jetbrains.mps.openapi.model.SNode;
import org.iets3.variability.artifacts.base.behavior.IVariationPointBase__BehaviorDescriptor;
import com.google.common.base.MoreObjects;

public class PreviewCriteria {
  private static final String descriptionCriterion0 = "Show resulting variant";
  private static final String descriptionCriterion1 = "Show resulting variant (with conditions)";
  private static final String descriptionCriterion2 = "Show resulting variant, incl. undefined";
  private static final String descriptionCriterion3 = "Show 150% artifact with evaluations";

  public static final PreviewCriteria criteria0 = new PreviewCriteria(Collections.unmodifiableSet(Collections.singleton(PresenceConditionValue.TRUE)), false, descriptionCriterion0);

  public static final PreviewCriteria criteria1 = new PreviewCriteria(Collections.unmodifiableSet(Collections.singleton(PresenceConditionValue.TRUE)), true, descriptionCriterion1);

  public static final PreviewCriteria criteria2 = new PreviewCriteria(Collections.unmodifiableSet(Sets.newHashSet(PresenceConditionValue.TRUE, PresenceConditionValue.UNDEFINED)), true, descriptionCriterion2);

  public static final PreviewCriteria criteria3 = new PreviewCriteria(Collections.unmodifiableSet(Sets.newHashSet(PresenceConditionValue.TRUE, PresenceConditionValue.UNDEFINED, PresenceConditionValue.FALSE)), true, descriptionCriterion3);

  public static final List<PreviewCriteria> criteria = ListSequence.fromListAndArray(new ArrayList<PreviewCriteria>(), criteria0, criteria1, criteria2, criteria3);

  public static Iterable<String> criteriaDescriptions() {
    return ListSequence.fromList(criteria).select((it) -> it.description);
  }

  private final Set<PresenceConditionValue> visibleArifactsOfEvaluatedVP;
  private final Boolean showConditition;
  private String description;

  public PreviewCriteria(Set<PresenceConditionValue> visibleArifactsOfEvaluatedVP, boolean showVp, String description) {
    this.visibleArifactsOfEvaluatedVP = visibleArifactsOfEvaluatedVP;
    this.showConditition = showVp;
    this.description = description;
  }

  public boolean isVisible(PresenceConditionValue pcv) {
    return this.visibleArifactsOfEvaluatedVP.contains(pcv);
  }

  public boolean isShown(SNode vp) {
    return this.showConditition && this.isVisible(IVariationPointBase__BehaviorDescriptor.getState_id7pGmjNvL72C.invoke(vp));
  }

  public static PreviewCriteria defaultCriteria() {
    return criteria0;
  }

  public String description() {
    return description;
  }

  @Override
  public String toString() {
    return MoreObjects.toStringHelper(this.getClass()).add("visibleArifactsOfEvaluatedVP", this.visibleArifactsOfEvaluatedVP).add("showVP", this.showConditition).toString();
  }
}
