package org.iets3.variability.artifacts.base.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import org.iets3.analysis.solversupport.util.plugin.ExprBuilders;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public interface ISolverCheckExtender {

  default SNode expressionFor(SNode n) {
    SNode varRefFor = varRefFor(n);
    return ((varRefFor == null) ? ExprBuilders.trueLiteral() : varRefFor);
  }

  SNode varRefFor(SNode n);

  ExtraVariableSolverItem makeAttributeFor(SNode parent, IVAAType st, String name, SNode value);

  SNode makeAuxiliaryVariable(IVAAType type, String name);

  default void ensureInvariant(SNode invariant, String invariantName, SNode messageNode) {
    ensureInvariant(invariant, invariantName, messageNode, "Could not ensure invariant.\nCounterexample is:\n%modelCompact%  ");
  }

  void ensureInvariant(SNode invariant, String invariantName, SNode messageNode, String msg);

  default void ensureAbsence(SNode absentExpression, String testName, SNode messageNode) {
    ensureAbsence(absentExpression, testName, messageNode, "Could not ensure absence.\nCounterexample is\n%modelCompact% ");
  }

  default void ensureAbsence(SNode absentExpression, String testName, SNode messageNode, String msg) {
    ensureInvariant(ExprBuilders.not(absentExpression), testName, messageNode, msg);
  }


  enum IVAAType {
    Int() {
      public SNode type() {
        return createOptionType_bhyosp_a0a0a81(createIntegerType_bhyosp_a0a0a0a0a81());
      }

    },
    Bool() {
      public SNode type() {
        return createOptionType_bhyosp_a0a0b81(createBooleanType_bhyosp_a0a0a0a0b81());
      }

    },
    Real() {
      public SNode type() {
        return createOptionType_bhyosp_a0a0c81(createRealType_bhyosp_a0a0a0a0c81());
      }

    },
    String() {
      public SNode type() {
        return createOptionType_bhyosp_a0a0d81(createStringType_bhyosp_a0a0a0a0d81());
      }

    };

    public abstract SNode type();

    private static SNode createOptionType_bhyosp_a0a0a81(SNode p0) {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.OptionType$eU);
      n0.forChild(LINKS.baseType$Cv_a).initNode(p0, CONCEPTS.Type$WK, true);
      return n0.getResult();
    }
    private static SNode createIntegerType_bhyosp_a0a0a0a0a81() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.IntegerType$m0);
      return n0.getResult();
    }
    private static SNode createOptionType_bhyosp_a0a0b81(SNode p0) {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.OptionType$eU);
      n0.forChild(LINKS.baseType$Cv_a).initNode(p0, CONCEPTS.Type$WK, true);
      return n0.getResult();
    }
    private static SNode createBooleanType_bhyosp_a0a0a0a0b81() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.BooleanType$eL);
      return n0.getResult();
    }
    private static SNode createOptionType_bhyosp_a0a0c81(SNode p0) {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.OptionType$eU);
      n0.forChild(LINKS.baseType$Cv_a).initNode(p0, CONCEPTS.Type$WK, true);
      return n0.getResult();
    }
    private static SNode createRealType_bhyosp_a0a0a0a0c81() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.RealType$36);
      return n0.getResult();
    }
    private static SNode createOptionType_bhyosp_a0a0d81(SNode p0) {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.OptionType$eU);
      n0.forChild(LINKS.baseType$Cv_a).initNode(p0, CONCEPTS.Type$WK, true);
      return n0.getResult();
    }
    private static SNode createStringType_bhyosp_a0a0a0a0d81() {
      SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.StringType$B3);
      return n0.getResult();
    }
  }

  class ExtraVariableSolverItem {
    private SNode variable;

    public ExtraVariableSolverItem(SNode variable) {
      this.variable = variable;
    }

    public SNode variable() {
      return this.variable;
    }
  }

  final class CONCEPTS {
    /*package*/ static final SConcept OptionType$eU = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x26f4f2a81ca93310L, "org.iets3.core.expr.base.structure.OptionType");
    /*package*/ static final SConcept Type$WK = MetaAdapterFactory.getConcept(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x670d5e92f854a614L, "org.iets3.core.expr.base.structure.Type");
    /*package*/ static final SConcept IntegerType$m0 = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d0e6d9L, "org.iets3.core.expr.simpleTypes.structure.IntegerType");
    /*package*/ static final SConcept BooleanType$eL = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x670d5e92f854a617L, "org.iets3.core.expr.simpleTypes.structure.BooleanType");
    /*package*/ static final SConcept RealType$36 = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d0e74cL, "org.iets3.core.expr.simpleTypes.structure.RealType");
    /*package*/ static final SConcept StringType$B3 = MetaAdapterFactory.getConcept(0x6b277d9ad52d416fL, 0xa2091919bd737f50L, 0x46ff3b3d86d3edc7L, "org.iets3.core.expr.simpleTypes.structure.StringType");
  }

  final class LINKS {
    /*package*/ static final SContainmentLink baseType$Cv_a = MetaAdapterFactory.getContainmentLink(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x26f4f2a81ca93310L, 0x26f4f2a81ca93311L, "baseType");
  }
}
