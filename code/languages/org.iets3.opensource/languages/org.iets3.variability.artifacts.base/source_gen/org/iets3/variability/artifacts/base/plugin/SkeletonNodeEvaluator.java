package org.iets3.variability.artifacts.base.plugin;

/*Generated by MPS */

import org.iets3.variability.artifacts.base.behavior.PresenceConditionValue;
import org.jetbrains.mps.openapi.model.SNode;
import org.iets3.analysis.solversupport.util.plugin.ExprBuilders;
import org.iets3.variability.artifacts.base.behavior.ArtifactPath;

/**
 * Some SkeletonNodes will have a SkeletonNodeEvaluator attached. This evaluator 
 * is used to evaluate the PresenceValue of the SkeletonNode depending on some 
 * expression which expresses structural dependency to some of its inner nodes.
 */
public interface SkeletonNodeEvaluator {

  /**
   * Computes the PresenceConditionValue of the SkeletonNode which has this evaluator 
   * 
   * @param pvp pvp
   * @return PresenceConditionValue
   */
  PresenceConditionValue presenceValueFor(ContextPresenceValueProvider pvp);

  /**
   * Expression defining structural dependency: Must be true iff surrounding SkeletonNode is present
   * 
   * @return expression
   */
  default SNode expression() {
    return ExprBuilders.trueLiteral();
  }
  /**
   * Will be called at a certain instantiation path (ArtifactPath) in the skeletonTree, i.e SkeletonNode sn.
   * For Node n contained in sn with ArtifactPath local to sn we can ask for the current PresenceValue of n.
   */
  interface ContextPresenceValueProvider {
    PresenceConditionValue eval(SNode n, ArtifactPath localPath);
  }
}
