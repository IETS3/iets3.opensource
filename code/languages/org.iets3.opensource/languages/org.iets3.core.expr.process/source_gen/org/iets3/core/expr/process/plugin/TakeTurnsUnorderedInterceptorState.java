package org.iets3.core.expr.process.plugin;

/*Generated by MPS */

import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class TakeTurnsUnorderedInterceptorState extends AbstractTakeTurnsInterceptorState {

  private Set<Object> turns = SetSequence.fromSet(new HashSet<Object>());

  public TakeTurnsUnorderedInterceptorState(SNode intc, List parties) {
    super(intc, parties);
  }


  public TakeTurnsUnorderedInterceptorState add(Object user) {
    TakeTurnsUnorderedInterceptorState r = new TakeTurnsUnorderedInterceptorState(this.myIntc, this.parties);
    SetSequence.fromSet(r.turns).addSequence(SetSequence.fromSet(this.turns));
    SetSequence.fromSet(r.turns).addElement(user);
    return r;
  }

  public TakeTurnsUnorderedInterceptorState clear() {
    return new TakeTurnsUnorderedInterceptorState(this.myIntc, this.parties);
  }

  public boolean hasHadItsTurn(Object user) {
    return SetSequence.fromSet(this.turns).contains(user);
  }

  public boolean containsAll(Iterable users) {
    List<Object> all = ListSequence.fromList(new ArrayList<Object>());
    for (Object u : users) {
      ListSequence.fromList(all).addElement(u);
    }
    return SetSequence.fromSet(this.turns).containsSequence(ListSequence.fromList(all));
  }

}
