package org.iets3.core.expr.genjava.stateMachineExample.sandbox;

/*Generated by MPS */

import org.iets3.core.expr.genjava.stateMachineExample.runtime.StateMachine;
import org.iets3.core.expr.genjava.stateMachineExample.runtime.State;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import org.iets3.core.expr.genjava.stateMachineExample.runtime.Transition;
import java.util.Map;
import org.iets3.core.expr.simpleTypes.runtime.AH;
import java.math.BigInteger;

public class Lamp extends StateMachine {

  public Lamp() {
    super(new State());
    MapSequence.fromMap(states).put("OFF", startState);

    MapSequence.fromMap(states).put("ON", new State());

    MapSequence.fromMap(states).get("OFF").addTransition("PressButton", new TransitionPressButtonOFF(MapSequence.fromMap(states).get("ON")));
    MapSequence.fromMap(states).get("ON").addTransition("PressButton", new TransitionPressButtonON(MapSequence.fromMap(states).get("OFF")));
  }

  public static class TransitionPressButtonOFF extends Transition {
    public TransitionPressButtonOFF(State state) {
      super(state);
    }
    @Override
    public State fireEvent(Map<String, Object> parameters) {
      boolean conditionsFullfilled = true;
      Number time = ((Number) MapSequence.fromMap(parameters).get("time"));

      if (!(AH.isLess(time, ((Number) new BigInteger("5"))))) {
        conditionsFullfilled = false;
      }

      if (conditionsFullfilled) {
        return targetState;
      }

      return null;
    }
  }
  public static class TransitionPressButtonON extends Transition {
    public TransitionPressButtonON(State state) {
      super(state);
    }
    @Override
    public State fireEvent(Map<String, Object> parameters) {
      boolean conditionsFullfilled = true;
      Number time = ((Number) MapSequence.fromMap(parameters).get("time"));


      if (conditionsFullfilled) {
        return targetState;
      }

      return null;
    }
  }

}
