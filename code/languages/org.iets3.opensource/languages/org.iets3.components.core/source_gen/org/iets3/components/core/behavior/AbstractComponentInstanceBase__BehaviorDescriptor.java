package org.iets3.components.core.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.baseLanguage.tuples.runtime.Tuples;
import java.util.List;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.baseLanguage.tuples.runtime.MultiTuple;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;

public final class AbstractComponentInstanceBase__BehaviorDescriptor extends BaseBHDescriptor {
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x71edfb21ed616471L, "org.iets3.components.core.structure.AbstractComponentInstanceBase");

  public static final SMethod<SNode> component_id77HYM7H$sfU = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("component").modifiers(12, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(8209493818904527866L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<SNode> kind_id6LfBX8Yl7Hz = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("kind").modifiers(8, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(7804632404594031459L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<SNode> findPortByID_idsiw10GLvYX = new SMethodBuilder<SNode>(new SJavaCompoundTypeImpl((Class<SNode>) ((Class) Object.class))).name("findPortByID").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(509610514805292989L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2(SMethodBuilder.createJavaParameter(String.class, ""));
  public static final SMethod<Iterable<SNode>> sourcePorts_idmIQkxfsZt_ = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("sourcePorts").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(409503520731166565L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Iterable<SNode>> targetPorts_idmIQkxft09G = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("targetPorts").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(409503520731169388L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Iterable<SNode>> portsWithCategory_idmIQkxftdob = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("portsWithCategory").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(409503520731223563L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2(SMethodBuilder.createJavaParameter((Class<SConcept>) ((Class) Object.class), ""));
  public static final SMethod<String> iconPath_id1MFobPs_HJR = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("iconPath").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(2065851220497980407L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Void> autowire_id1WCh2thaL0Y = new SMethodBuilder<Void>(new SJavaCompoundTypeImpl(Void.class)).name("autowire").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(2245119349900382270L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Iterable<Tuples._2<SNode, SNode>>> sourcePortsAndInstance_id1WCh2thchui = new SMethodBuilder<Iterable<Tuples._2<SNode, SNode>>>(new SJavaCompoundTypeImpl((Class<Iterable<Tuples._2<SNode, SNode>>>) ((Class) Object.class))).name("sourcePortsAndInstance").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(2245119349900777362L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Iterable<SNode>> parameterValues_id3xTZ$YBvTdz = new SMethodBuilder<Iterable<SNode>>(new SJavaCompoundTypeImpl((Class<Iterable<SNode>>) ((Class) Object.class))).name("parameterValues").modifiers(12, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4069563356371981155L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();
  public static final SMethod<Boolean> isInline_id3xTZ$YBw7Op = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("isInline").modifiers(12, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(4069563356372040985L).languageId(0xb6713d118449c6e7L, 0xf0fd486f857743e9L).build2();

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(component_id77HYM7H$sfU, kind_id6LfBX8Yl7Hz, findPortByID_idsiw10GLvYX, sourcePorts_idmIQkxfsZt_, targetPorts_idmIQkxft09G, portsWithCategory_idmIQkxftdob, iconPath_id1MFobPs_HJR, autowire_id1WCh2thaL0Y, sourcePortsAndInstance_id1WCh2thchui, parameterValues_id3xTZ$YBvTdz, isInline_id3xTZ$YBw7Op);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static SNode kind_id6LfBX8Yl7Hz(@NotNull SNode __thisNode__) {
    return SLinkOperations.getTarget(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__), LINKS.kind$8cnO);
  }
  /*package*/ static SNode findPortByID_idsiw10GLvYX(@NotNull SNode __thisNode__, final String id) {
    return Sequence.fromIterable(AbstractComponentInterface__BehaviorDescriptor.ports_idx8tpSA8agB.invoke(Component__BehaviorDescriptor.compInterface_idx8tpSA1cCO.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__)))).findFirst((it) -> SPropertyOperations.getString(it, PROPS.name$MnvL).equals(id));
  }
  /*package*/ static Iterable<SNode> sourcePorts_idmIQkxfsZt_(@NotNull SNode __thisNode__) {
    return (Iterable<SNode>) Component__BehaviorDescriptor.sourcePorts_idmIQkxfv1VO.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__));
  }
  /*package*/ static Iterable<SNode> targetPorts_idmIQkxft09G(@NotNull SNode __thisNode__) {
    return (Iterable<SNode>) Component__BehaviorDescriptor.targetPorts_idmIQkxfv1Wg.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__));
  }
  /*package*/ static Iterable<SNode> portsWithCategory_idmIQkxftdob(@NotNull SNode __thisNode__, SConcept cat) {
    return (Iterable<SNode>) Component__BehaviorDescriptor.portsWithCategory_idmIQkxfCIwV.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__), cat);
  }
  /*package*/ static String iconPath_id1MFobPs_HJR(@NotNull SNode __thisNode__) {
    return (String) Component__BehaviorDescriptor.iconPath_id7Atos1xKgck.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__));
  }
  /*package*/ static void autowire_id1WCh2thaL0Y(@NotNull final SNode __thisNode__) {
    SNode substructure = SNodeOperations.cast(SNodeOperations.getParent(__thisNode__), CONCEPTS.ComponentSubstructure$oB);
    SNode component = SNodeOperations.cast(SNodeOperations.getParent(substructure), CONCEPTS.Component$gR);
    Iterable<SNode> otherInstances = Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getChildren(substructure, LINKS.contents$7e9r), CONCEPTS.AbstractComponentInstanceBase$QW)).where((it) -> it != __thisNode__);
    Iterable<Tuples._2<SNode, SNode>> sourcesOnInstances = Sequence.fromIterable(otherInstances).translate((it) -> (Iterable<Tuples._2<SNode, SNode>>) AbstractComponentInstanceBase__BehaviorDescriptor.sourcePortsAndInstance_id1WCh2thchui.invoke(it));
    Iterable<SNode> outerTargetPorts = Component__BehaviorDescriptor.targetPorts_idmIQkxfv1Wg.invoke(component);
    Iterable<SNode> nonOptionalTargetPorts = Sequence.fromIterable(AbstractComponentInstanceBase__BehaviorDescriptor.targetPorts_idmIQkxft09G.invoke(__thisNode__)).where((it) -> (boolean) PortCategory__BehaviorDescriptor.isGoverningSide_idsiw10H0o$5.invoke(SLinkOperations.getTarget(it, LINKS.category$WD4l)) || !((boolean) Port__BehaviorDescriptor.isOptional_idmIQkxf$r$2.invoke(it)));
    for (SNode targetPort : Sequence.fromIterable(nonOptionalTargetPorts)) {
      final SNode targetType = SLinkOperations.getTarget(targetPort, LINKS.type$5Gl6);
      Iterable<Tuples._2<SNode, SNode>> compatibleSources = Sequence.fromIterable(sourcesOnInstances).where((it) -> ((boolean) PortCategory__BehaviorDescriptor.isGoverningSide_idsiw10H0o$5.invoke(SLinkOperations.getTarget(it._0(), LINKS.category$WD4l)) || !((boolean) Port__BehaviorDescriptor.isOptional_idmIQkxf$r$2.invoke(it._0()))) && (boolean) IPortType__BehaviorDescriptor.isCompatibleWithGoverningType_idcJpacq1kKx.invoke(SLinkOperations.getTarget(it._0(), LINKS.type$5Gl6), targetType));
      Iterable<SNode> compatibleOutsidePorts = Sequence.fromIterable(outerTargetPorts).where((it) -> (boolean) IPortType__BehaviorDescriptor.isCompatibleWithGoverningType_idcJpacq1kKx.invoke(SLinkOperations.getTarget(it, LINKS.type$5Gl6), targetType));

      if (Sequence.fromIterable(compatibleSources).count() + Sequence.fromIterable(compatibleOutsidePorts).count() == 1) {
        if (Sequence.fromIterable(compatibleSources).count() == 1) {
          Tuples._2<SNode, SNode> source = Sequence.fromIterable(compatibleSources).first();
          SNode sourcePort = source._0();
          SNode sourceInstance = source._1();
          ListSequence.fromList(SLinkOperations.getChildren(substructure, LINKS.contents$7e9r)).addElement(createAssemblyConnector_n5wss8_a0a3a0a4a6a7(sourceInstance, sourcePort, __thisNode__, targetPort, IPortType__BehaviorDescriptor.createConnectorType_id4KDeVD8s9TJ.invoke(SLinkOperations.getTarget(sourcePort, LINKS.type$5Gl6))));

        } else if (Sequence.fromIterable(compatibleOutsidePorts).count() == 1) {
          SNode op = Sequence.fromIterable(compatibleOutsidePorts).first();
          ListSequence.fromList(SLinkOperations.getChildren(substructure, LINKS.contents$7e9r)).addElement(createImportConnector_n5wss8_a0a1a0a0e0g0h(__thisNode__, targetPort, op, IPortType__BehaviorDescriptor.createConnectorType_id4KDeVD8s9TJ.invoke(SLinkOperations.getTarget(op, LINKS.type$5Gl6))));
        }
      }
    }
  }
  /*package*/ static Iterable<Tuples._2<SNode, SNode>> sourcePortsAndInstance_id1WCh2thchui(@NotNull final SNode __thisNode__) {
    return Sequence.fromIterable(Component__BehaviorDescriptor.sourcePorts_idmIQkxfv1VO.invoke(AbstractComponentInstanceBase__BehaviorDescriptor.component_id77HYM7H$sfU.invoke(__thisNode__))).select((it) -> MultiTuple.<SNode,SNode>from(it, __thisNode__));
  }

  /*package*/ AbstractComponentInstanceBase__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 1:
        return (T) ((SNode) kind_id6LfBX8Yl7Hz(node));
      case 2:
        return (T) ((SNode) findPortByID_idsiw10GLvYX(node, (String) parameters[0]));
      case 3:
        return (T) ((Iterable<SNode>) sourcePorts_idmIQkxfsZt_(node));
      case 4:
        return (T) ((Iterable<SNode>) targetPorts_idmIQkxft09G(node));
      case 5:
        return (T) ((Iterable<SNode>) portsWithCategory_idmIQkxftdob(node, (SConcept) parameters[0]));
      case 6:
        return (T) ((String) iconPath_id1MFobPs_HJR(node));
      case 7:
        autowire_id1WCh2thaL0Y(node);
        return null;
      case 8:
        return (T) ((Iterable<Tuples._2<SNode, SNode>>) sourcePortsAndInstance_id1WCh2thchui(node));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }
  private static SNode createAssemblyConnector_n5wss8_a0a3a0a4a6a7(SNode p0, SNode p1, SNode p2, SNode p3, SNode p4) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.AssemblyConnector$qU);
    {
      SNodeBuilder n1 = n0.forChild(LINKS.sourceInstance$LjmV).init(CONCEPTS.InstanceRef$Gm);
      n1.setReferenceTarget(LINKS.ref$H$FL, p0);
    }
    n0.setReferenceTarget(LINKS.sourcePort$ZLvQ, p1);
    {
      SNodeBuilder n2 = n0.forChild(LINKS.targetInstance$RipR).init(CONCEPTS.InstanceRef$Gm);
      n2.setReferenceTarget(LINKS.ref$H$FL, p2);
    }
    n0.setReferenceTarget(LINKS.targetPort$ZZ$M, p3);
    n0.forChild(LINKS.connectorType$8zQx).initNode(p4, CONCEPTS.IConnectorType$F7, true);
    return n0.getResult();
  }
  private static SNode createImportConnector_n5wss8_a0a1a0a0e0g0h(SNode p0, SNode p1, SNode p2, SNode p3) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.ImportConnector$8o);
    {
      SNodeBuilder n1 = n0.forChild(LINKS.targetInstance$ZsmL).init(CONCEPTS.InstanceRef$Gm);
      n1.setReferenceTarget(LINKS.ref$H$FL, p0);
    }
    n0.setReferenceTarget(LINKS.targetPort$ZxZ9, p1);
    n0.setReferenceTarget(LINKS.outerPort$3H4p, p2);
    n0.forChild(LINKS.connectorType$8zQx).initNode(p3, CONCEPTS.IConnectorType$F7, true);
    return n0.getResult();
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink kind$8cnO = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x6c4f9fd23e484601L, 0x6c4f9fd23e4c96f7L, "kind");
    /*package*/ static final SContainmentLink contents$7e9r = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x71280102b4ce9cdL, 0x71280102b4ce9ceL, "contents");
    /*package*/ static final SContainmentLink category$WD4l = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x6c4f9fd23e51937cL, 0x5aed9484f65f1e5L, "category");
    /*package*/ static final SContainmentLink type$5Gl6 = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x6c4f9fd23e51937cL, 0x6c4f9fd23e566372L, "type");
    /*package*/ static final SContainmentLink sourceInstance$LjmV = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f1aL, 0x7fdf70a1447e06a1L, "sourceInstance");
    /*package*/ static final SReferenceLink ref$H$FL = MetaAdapterFactory.getReferenceLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f29L, 0x7fdf70a1447d7f36L, "ref");
    /*package*/ static final SReferenceLink sourcePort$ZLvQ = MetaAdapterFactory.getReferenceLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f1aL, 0x32f64a31a05d502L, "sourcePort");
    /*package*/ static final SContainmentLink targetInstance$RipR = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f1aL, 0x7fdf70a1447f1d65L, "targetInstance");
    /*package*/ static final SReferenceLink targetPort$ZZ$M = MetaAdapterFactory.getReferenceLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f1aL, 0x32f64a31a05d514L, "targetPort");
    /*package*/ static final SContainmentLink connectorType$8zQx = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x3a8867c74e876c3fL, 0x3a8867c74e88330cL, "connectorType");
    /*package*/ static final SContainmentLink targetInstance$ZsmL = MetaAdapterFactory.getContainmentLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x32f64a31a05d2c1L, 0x32f64a31a07b915L, "targetInstance");
    /*package*/ static final SReferenceLink targetPort$ZxZ9 = MetaAdapterFactory.getReferenceLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x32f64a31a05d2c1L, 0x32f64a31a07b918L, "targetPort");
    /*package*/ static final SReferenceLink outerPort$3H4p = MetaAdapterFactory.getReferenceLink(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x32f64a31a05d2c1L, 0x32f64a31a05d2cbL, "outerPort");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept ComponentSubstructure$oB = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x71280102b4ce9cdL, "org.iets3.components.core.structure.ComponentSubstructure");
    /*package*/ static final SConcept Component$gR = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x6c4f9fd23e484601L, "org.iets3.components.core.structure.Component");
    /*package*/ static final SConcept AbstractComponentInstanceBase$QW = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x71edfb21ed616471L, "org.iets3.components.core.structure.AbstractComponentInstanceBase");
    /*package*/ static final SConcept AssemblyConnector$qU = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f1aL, "org.iets3.components.core.structure.AssemblyConnector");
    /*package*/ static final SConcept InstanceRef$Gm = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x7fdf70a1447d7f29L, "org.iets3.components.core.structure.InstanceRef");
    /*package*/ static final SInterfaceConcept IConnectorType$F7 = MetaAdapterFactory.getInterfaceConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x4c293bba48709df1L, "org.iets3.components.core.structure.IConnectorType");
    /*package*/ static final SConcept ImportConnector$8o = MetaAdapterFactory.getConcept(0xf0fd486f857743e9L, 0xb6713d118449c6e7L, 0x32f64a31a05d2c1L, "org.iets3.components.core.structure.ImportConnector");
  }
}
