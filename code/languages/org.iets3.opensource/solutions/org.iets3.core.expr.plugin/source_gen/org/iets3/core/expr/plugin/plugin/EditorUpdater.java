package org.iets3.core.expr.plugin.plugin;

/*Generated by MPS */

import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.model.SNodeReference;
import org.jetbrains.mps.openapi.module.SRepository;
import com.intellij.openapi.fileEditor.FileEditorManager;
import java.util.List;
import jetbrains.mps.nodeEditor.EditorComponent;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.ide.editor.util.EditorComponentUtil;

public class EditorUpdater {

  public static void updateEditors(@NotNull final SNodeReference reference, final SRepository repo, final FileEditorManager mgr) {
    final List<EditorComponent> componentsToUpdate = ListSequence.fromList(new ArrayList<EditorComponent>());

    repo.getModelAccess().runReadAction(() -> {
      SNode node = reference.resolve(repo);
      if (node == null) {
        return;
      }
      ListSequence.fromList(componentsToUpdate).addSequence(ListSequence.fromList(EditorComponentUtil.findComponentForNode(node, mgr)));
    });

    for (EditorComponent ec : ListSequence.fromList(componentsToUpdate)) {
      ec.getUpdater().update();
    }
  }


}
