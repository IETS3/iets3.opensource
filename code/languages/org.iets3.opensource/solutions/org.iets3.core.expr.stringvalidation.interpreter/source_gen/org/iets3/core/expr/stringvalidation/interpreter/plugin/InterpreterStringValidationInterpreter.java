package org.iets3.core.expr.stringvalidation.interpreter.plugin;

/*Generated by MPS */

import com.mbeddr.mpsutil.interpreter.rt.InterpreterBase;
import java.util.List;
import com.mbeddr.mpsutil.interpreter.rt.IEvaluator;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import com.mbeddr.mpsutil.interpreter.rt.ConceptEvaluatorBase;
import org.jetbrains.mps.openapi.model.SNode;
import com.mbeddr.mpsutil.interpreter.rt.IContext;
import com.mbeddr.mpsutil.interpreter.rt.ICoverageAnalyzer;
import com.mbeddr.mpsutil.interpreter.rt.ComputationTrace;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import org.iets3.core.expr.base.behavior.IDotTarget__BehaviorDescriptor;
import com.mbeddr.mpsutil.interpreter.rt.StopAndReturnException;
import com.mbeddr.mpsutil.interpreter.rt.InterpreterEscapeException;
import com.mbeddr.mpsutil.interpreter.rt.InterpreterRuntimeException;
import com.mbeddr.mpsutil.interpreter.rt.EvaluatorInfo;
import org.pcollections.PVector;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.iets3.core.expr.stringvalidation.runtime.runtime.XValidateStringExpression;
import org.iets3.core.expr.stringvalidation.runtime.runtime.XAbstractValidationClause;
import org.iets3.core.expr.stringvalidation.behavior.AbstractValidationClause__BehaviorDescriptor;
import org.iets3.core.expr.stringvalidation.runtime.runtime.XExecutor;
import org.pcollections.Empty;
import com.mbeddr.mpsutil.interpreter.rt.ITypeMapper;
import com.mbeddr.mpsutil.interpreter.rt.IRelationship;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public class InterpreterStringValidationInterpreter extends InterpreterBase {
  public InterpreterStringValidationInterpreter() {
    init();
  }

  @Override
  public String getCategory() {
    return "arithmetic";
  }

  protected void populateEvaluators(List<? extends IEvaluator> evaluators) {
    ListSequence.fromList(((List<IEvaluator>) evaluators)).addElement(new ConceptEvaluatorBase(CONCEPTS.ValidateStringResultErrorsOp$qV, "r:b29e6a20-a50b-4843-bdbb-248824424c2b(org.iets3.core.expr.stringvalidation.interpreter.plugin)/3709229751379692954", true) {
      public Object evaluateEvaluator(SNode node, IContext context, ICoverageAnalyzer coverage, ComputationTrace trace) {
        try {
          coverage.visitedEvaluator(this);
          coverage.visitedConcept(this.concept);
          coverage.visitedConcept(SNodeOperations.getConcept(node));
          return MapSequence.fromMap(context.getEnvironment()).get(IDotTarget__BehaviorDescriptor.contextExpression_id6zmBjqUivyF.invoke(node));
        } catch (StopAndReturnException stop) {
          return stop.value();
        } catch (InterpreterEscapeException ex) {
          throw ex;
        } catch (RuntimeException ex) {
          throw new InterpreterRuntimeException("errors()", node, ex, trace);
        }
      }
      public EvaluatorInfo getInfo() {
        return new EvaluatorInfo("ValidateStringResultErrorsOp", "http://127.0.0.1:63320/node?ref=e9ede1c6-75ec-4d1a-8191-f5f39fd91bd8%2Fi%3A10000001%28org.iets3.core.expr.stringvalidation.interpreter%40transient67%2Forg.iets3.core.expr.stringvalidation.interpreter.plugin%400%29%2F3709229751379692954");
      }

      @Override
      public String toString() {
        return "ValidateStringResultErrorsOp";
      }

      @Override
      public boolean canLookupBeCached() {
        return true;
      }
    });
    ListSequence.fromList(((List<IEvaluator>) evaluators)).addElement(new ConceptEvaluatorBase(CONCEPTS.ValidateStringResultOkOp$uD, "r:b29e6a20-a50b-4843-bdbb-248824424c2b(org.iets3.core.expr.stringvalidation.interpreter.plugin)/3709229751379660369", true) {
      public Object evaluateEvaluator(SNode node, IContext context, ICoverageAnalyzer coverage, ComputationTrace trace) {
        try {
          coverage.visitedEvaluator(this);
          coverage.visitedConcept(this.concept);
          coverage.visitedConcept(SNodeOperations.getConcept(node));
          return ((PVector) MapSequence.fromMap(context.getEnvironment()).get(IDotTarget__BehaviorDescriptor.contextExpression_id6zmBjqUivyF.invoke(node))).isEmpty();
        } catch (StopAndReturnException stop) {
          return stop.value();
        } catch (InterpreterEscapeException ex) {
          throw ex;
        } catch (RuntimeException ex) {
          throw new InterpreterRuntimeException("ok()", node, ex, trace);
        }
      }
      public EvaluatorInfo getInfo() {
        return new EvaluatorInfo("ValidateStringResultOkOp", "http://127.0.0.1:63320/node?ref=e9ede1c6-75ec-4d1a-8191-f5f39fd91bd8%2Fi%3A10000001%28org.iets3.core.expr.stringvalidation.interpreter%40transient67%2Forg.iets3.core.expr.stringvalidation.interpreter.plugin%400%29%2F3709229751379660369");
      }

      @Override
      public String toString() {
        return "ValidateStringResultOkOp";
      }

      @Override
      public boolean canLookupBeCached() {
        return true;
      }
    });
    ListSequence.fromList(((List<IEvaluator>) evaluators)).addElement(new ConceptEvaluatorBase(CONCEPTS.ValidateStringExpr$xB, "r:b29e6a20-a50b-4843-bdbb-248824424c2b(org.iets3.core.expr.stringvalidation.interpreter.plugin)/5001505504945040316", true) {
      public Object evaluateEvaluator(SNode node, IContext context, ICoverageAnalyzer coverage, ComputationTrace trace) {
        try {
          coverage.visitedEvaluator(this);
          coverage.visitedConcept(this.concept);
          coverage.visitedConcept(SNodeOperations.getConcept(node));
          String candidate = ((String) context.getRootInterpreter().evaluate(SLinkOperations.getTarget(node, LINKS.expr$CW3E), context, coverage, trace, false));
          XValidateStringExpression x = new XValidateStringExpression(candidate, ListSequence.fromList(SLinkOperations.getChildren(node, LINKS.clauses$VM32)).select((it) -> (XAbstractValidationClause) AbstractValidationClause__BehaviorDescriptor.makeX_id5wF$o0BEPkN.invoke(it)).toList());
          List<String> errors = new XExecutor(x).run();
          return Empty.vector().plusAll(errors);
        } catch (StopAndReturnException stop) {
          return stop.value();
        } catch (InterpreterEscapeException ex) {
          throw ex;
        } catch (RuntimeException ex) {
          throw new InterpreterRuntimeException("validate()", node, ex, trace);
        }
      }
      public EvaluatorInfo getInfo() {
        return new EvaluatorInfo("ValidateStringExpr", "http://127.0.0.1:63320/node?ref=e9ede1c6-75ec-4d1a-8191-f5f39fd91bd8%2Fi%3A10000001%28org.iets3.core.expr.stringvalidation.interpreter%40transient67%2Forg.iets3.core.expr.stringvalidation.interpreter.plugin%400%29%2F5001505504945040316");
      }

      @Override
      public String toString() {
        return "ValidateStringExpr";
      }

      @Override
      public boolean canLookupBeCached() {
        return true;
      }
    });
  }


  protected void populateTypeMappers(List<? extends ITypeMapper> typeMappers) {
  }



  protected void populateRelationships(List<? extends IRelationship> relationships) {
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept ValidateStringResultErrorsOp$qV = MetaAdapterFactory.getConcept(0xf003a0fec14041d7L, 0xa145ea42368e581cL, 0x3379d4ce794565e2L, "org.iets3.core.expr.stringvalidation.structure.ValidateStringResultErrorsOp");
    /*package*/ static final SConcept ValidateStringResultOkOp$uD = MetaAdapterFactory.getConcept(0xf003a0fec14041d7L, 0xa145ea42368e581cL, 0x4523f3f456160c00L, "org.iets3.core.expr.stringvalidation.structure.ValidateStringResultOkOp");
    /*package*/ static final SConcept ValidateStringExpr$xB = MetaAdapterFactory.getConcept(0xf003a0fec14041d7L, 0xa145ea42368e581cL, 0x4568eac1f468bb42L, "org.iets3.core.expr.stringvalidation.structure.ValidateStringExpr");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink expr$CW3E = MetaAdapterFactory.getContainmentLink(0xcfaa4966b7d54b69L, 0xb66a309a6e1a7290L, 0x3b256bb6ae8048d8L, 0x3b256bb6ae8048d9L, "expr");
    /*package*/ static final SContainmentLink clauses$VM32 = MetaAdapterFactory.getContainmentLink(0xf003a0fec14041d7L, 0xa145ea42368e581cL, 0x4568eac1f468bb42L, 0x4568eac1f473e1d7L, "clauses");
  }
}
