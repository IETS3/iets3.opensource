package org.iets3.core.expr.datetime.runtime;

/*Generated by MPS */

import java.time.LocalDate;

/**
 * Represents a date range (interval) starting from 'begin', of length 'count' units given by 'unit'.
 * Example: new DateRangeValue(LocalDate.of(2018, 1, 1), ChronoUnit.MONTHS, 3) represents Q1 of 2018.
 * 
 * Factory methods are provided for the common cases of single-year, single-month, and "all-time" ranges.
 */
public class ArbitraryDateRangeValue extends AbstractDateRangeValue {
  private final LocalDate begin;
  private final LocalDate end;

  public ArbitraryDateRangeValue(LocalDate begin, LocalDate end) {
    this.begin = begin;
    this.end = end;
  }

  public static ArbitraryDateRangeValue make(LocalDate begin, LocalDate end) {
    if (end.isBefore(begin)) {
      return new EmptyDateRangeValue();
    }
    return new ArbitraryDateRangeValue(begin, end);
  }

  public LocalDate begin() {
    return begin;
  }

  public LocalDate end() {
    return end;
  }

  @Override
  public String toString() {
    return "[date range: " + begin() + " to " + end() + "]";
  }

  @Override
  public int compareTo(AbstractDateRangeValue value) {
    if (value instanceof EmptyDateRangeValue) {
      return 1;
    }

    int beginComparison = this.begin.compareTo(value.begin());

    if (beginComparison != 0) {
      return beginComparison;
    }

    int endComparison = this.end.compareTo(value.end());

    return endComparison;

  }
}
