package org.iets3.core.expr.datetime.runtime;

/*Generated by MPS */

import java.math.BigInteger;
import java.util.Objects;
import java.time.Duration;
import java.time.LocalTime;

public class TimeDeltaValue implements Comparable<TimeDeltaValue> {

  private final BigInteger hours;
  private final BigInteger minutes;
  private final BigInteger seconds;

  public TimeDeltaValue(BigInteger hours, BigInteger minutes, BigInteger seconds) {
    this.hours = hours;
    this.minutes = minutes;
    this.seconds = seconds;
  }

  @Override
  public int hashCode() {
    return Objects.hash(hours, minutes, seconds);
  }

  @Override
  public boolean equals(Object object) {
    if (!(object instanceof TimeDeltaValue)) {
      return false;
    }

    TimeDeltaValue other = (TimeDeltaValue) object;

    return other.hours.equals(this.hours) && other.minutes.equals(this.minutes) && other.seconds.equals(this.seconds);
  }

  @Override
  public String toString() {
    StringBuilder result = new StringBuilder();
    if (isNonZero(hours)) {
      result.append(hours).append(" hours");
    }

    if (isNonZero(minutes)) {
      if (result.length() > 0) {
        result.append(" ");
      }
      result.append(minutes).append(" minutes");
    }

    if (isNonZero(seconds)) {
      if (result.length() > 0) {
        result.append(" ");
      }
      result.append(seconds).append(" seconds");
    }

    if (result.length() == 0) {
      // Zero period
      result.append("0");
    }

    return result.toString();
  }

  private static boolean isZero(BigInteger n) {
    return n.equals(BigInteger.ZERO);
  }
  private static boolean isNonZero(BigInteger n) {
    return !(isZero(n));
  }

  public Duration toDuration() {
    return Duration.ofSeconds(this.hours.longValue() * 3600 + this.minutes.longValue() * 60 + seconds.longValue());
  }

  public LocalTime addTo(LocalTime time) {
    return time.plus(toDuration());
  }

  public LocalTime subtractFrom(LocalTime date) {
    return date.minus(toDuration());
  }

  public TimeDeltaValue negate() {
    return new TimeDeltaValue(hours.negate(), minutes.negate(), seconds.negate());
  }

  public TimeDeltaValue plus(TimeDeltaValue delta) {
    return new TimeDeltaValue(this.hours.add(delta.hours), this.minutes.add(delta.minutes), this.seconds.add(delta.seconds));
  }

  public TimeDeltaValue minus(TimeDeltaValue delta) {
    return new TimeDeltaValue(this.hours.subtract(delta.hours), this.minutes.subtract(delta.minutes), this.seconds.subtract(delta.seconds));
  }

  public TimeDeltaValue multipliedBy(BigInteger factor) {
    return new TimeDeltaValue(hours.multiply(factor), minutes.multiply(factor), seconds.multiply(factor));
  }

  public TimeDeltaValue dividedBy(BigInteger factor) {
    return new TimeDeltaValue(hours.divide(factor), minutes.divide(factor), seconds.divide(factor));
  }


  public BigInteger toNumber() {
    if (!(isZero(this.hours)) && isZero(this.minutes) && isZero(this.seconds)) {
      return this.hours;
    }
    if (isZero(this.hours) && !(isZero(this.minutes)) && isZero(this.seconds)) {
      return this.minutes;
    }
    if (isZero(this.hours) && isZero(this.minutes) && !(isZero(this.seconds))) {
      return this.seconds;
    }
    throw new RuntimeException("the value " + this.toString() + " is not discrete; cannot return a number.");
  }

  public static final TimeDeltaValue ZERO = ofSeconds(BigInteger.ZERO);

  public static TimeDeltaValue ofHours(BigInteger hours) {
    return new TimeDeltaValue(hours, BigInteger.ZERO, BigInteger.ZERO);
  }

  public static TimeDeltaValue ofMinutes(BigInteger minutes) {
    return new TimeDeltaValue(BigInteger.ZERO, minutes, BigInteger.ZERO);
  }

  public static TimeDeltaValue ofSeconds(BigInteger seconds) {
    return new TimeDeltaValue(BigInteger.ZERO, BigInteger.ZERO, seconds);
  }


  @Override
  public int compareTo(TimeDeltaValue value) {
    int hoursComparison = this.hours.compareTo(value.hours);

    if (hoursComparison != 0) {
      return hoursComparison;
    }

    int minutesComparision = this.minutes.compareTo(value.minutes);

    if (minutesComparision != 0) {
      return minutesComparision;
    }

    int secondsComparision = this.seconds.compareTo(value.seconds);

    return secondsComparision;
  }
}
