package org.iets3.core.expr.simpleTypes.runtime;

/*Generated by MPS */

import java.util.function.Predicate;
import java.util.Comparator;
import java.util.Objects;
import java.util.List;

/**
 * Generic helper methods for objects
 */
public class OH {


  private static Predicate predicateComparable = new Predicate<Comparable>() {
    @Override
    public boolean test(Comparable object) {
      return object != null;
    }
  };
  private static Predicate predicateIComparator = new Predicate<Comparator>() {
    @Override
    public boolean test(Comparator object) {
      return object != null;
    }
  };

  public static Predicate<Object> predicate() {
    return predicateComparable.or(predicateIComparator);
  }


  public static int compare(Object n1, Object n2) {
    // Checking for an implemented IComparator<T> must be done before checking for Comparable otherwise Enums would be not correct
    if (Objects.equals(n1.getClass(), n2.getClass()) && n1 instanceof Comparator && n2 instanceof Comparator) {
      return ((Comparator) n1).compare(n1, n2);
    }
    if (Objects.equals(n1.getClass(), n2.getClass()) && n1 instanceof Comparable && n2 instanceof Comparable) {
      return as_z0_a0a0a2a8(n1, Comparable.class).compareTo(as_z0_a0a0a0c0i(n2, Comparable.class));
    }

    if (n1 instanceof List && n2 instanceof List) {
      List<Comparable> list1 = as_z0_a0a0a4a8(n1, List.class);
      List<Comparable> list2 = as_z0_a0a1a4a8(n2, List.class);

      int min = 0;
      int max = 0;
      for (int i = 0; i < Math.min(list1.size(), list2.size()); i++) {
        int result = compare(list1.get(i), list2.get(i));
        min = Math.min(min, result);
        max = Math.max(max, result);
      }
      if (min < 0) {
        return -1;
      } else if (max > 0) {
        return 1;
      } else {
        return 0;
      }

    }

    throw new IllegalArgumentException("Expected two comparable objects but was: " + n1.getClass() + " and " + n2.getClass());
  }

  public static boolean isEqual(Object n1, Object n2) {
    return compare(n1, n2) == 0;
  }

  public static boolean isGreater(Object n1, Object n2) {
    return compare(n1, n2) > 0;
  }

  public static boolean isGreaterOrEqual(Object n1, Object n2) {
    return compare(n1, n2) >= 0;
  }

  public static boolean isLess(Object n1, Object n2) {
    return compare(n1, n2) < 0;
  }
  private static <T> T as_z0_a0a0a2a8(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_z0_a0a0a0c0i(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_z0_a0a0a4a8(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_z0_a0a1a4a8(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}
