package org.iets3.core.expr.repl.plugin.plugin;

/*Generated by MPS */

import java.util.List;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.ArrayList;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.internal.collections.runtime.ListSequence;

public class Highlighter {

  public static Highlighter INCOMING = new Highlighter();
  public static Highlighter OUTGOING = new Highlighter();

  private List<SNode> lastHighlighted = new ArrayList<SNode>();
  private SNode lastSource;

  public void highlight(SNode sourceCell, List<SNode> cells, EditorContext ctx) {
    clearLast(ctx);
    if (lastSource == sourceCell) {
      lastSource = null;
      return;
    }
    lastSource = sourceCell;
    ListSequence.fromList(lastHighlighted).addSequence(ListSequence.fromList(cells));
    for (SNode c : ListSequence.fromList(cells)) {
      c.putUserObject("___highlight", "true");
    }
    ctx.getEditorComponent().update();
  }

  public void clearLast(EditorContext ctx) {
    for (SNode c : ListSequence.fromList(lastHighlighted)) {
      c.putUserObject("___highlight", null);
    }
    ctx.getEditorComponent().update();
    ListSequence.fromList(lastHighlighted).clear();
  }


}
